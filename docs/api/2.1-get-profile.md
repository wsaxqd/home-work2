# API 2.1 - 获取当前用户信息

## 接口信息

- **接口名称**: 获取当前用户信息
- **请求方法**: GET
- **请求路径**: `/api/users/profile`
- **需要认证**: 是

---

## 接口描述

获取当前登录用户的详细信息，包括个人资料和统计数据。

---

## 请求参数

### Header参数
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| Authorization | String | 是 | Bearer {accessToken} |

### Query参数
无

### 请求示例

```bash
GET /api/users/profile
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

---

## 响应结果

### 成功响应 (200 OK)

```json
{
  "success": true,
  "data": {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "phone": "13800138000",
    "nickname": "小明",
    "avatar": "https://example.com/avatar.jpg",
    "bio": "热爱AI和创作的小朋友",
    "created_at": "2024-12-20T10:00:00.000Z",
    "updated_at": "2024-12-21T14:30:00.000Z",
    "stats": {
      "worksCount": 15,
      "likesCount": 128,
      "followersCount": 42,
      "followingCount": 30
    }
  }
}
```

### 错误响应

#### 401 Unauthorized - 未登录
```json
{
  "success": false,
  "message": "请先登录"
}
```

#### 401 Unauthorized - Token过期
```json
{
  "success": false,
  "message": "登录已过期，请重新登录"
}
```

---

## 字段说明

| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | UUID | 用户ID |
| phone | String | 手机号 |
| nickname | String | 昵称 |
| avatar | String | 头像URL |
| bio | String | 个人简介 |
| created_at | DateTime | 注册时间 |
| updated_at | DateTime | 更新时间 |
| stats.worksCount | Integer | 作品数量 |
| stats.likesCount | Integer | 获赞数量 |
| stats.followersCount | Integer | 粉丝数量 |
| stats.followingCount | Integer | 关注数量 |

---

## 业务规则

1. 从Token中提取用户ID
2. 查询用户基本信息
3. 统计用户的作品、点赞、关注数据
4. 不返回password字段

---

## Postman测试

### 配置步骤
1. 方法：`GET`
2. URL：`http://localhost:3000/api/users/profile`
3. Headers标签
4. 添加：`Authorization: Bearer {{accessToken}}`
5. 发送请求

### 前置条件
需要先调用登录接口获取accessToken

---

## 相关接口

- [2.2 更新用户信息](./2.2-update-profile.md)
- [2.3 获取用户统计数据](./2.3-user-stats.md)
- [2.6 获取指定用户信息](./2.6-get-user-by-id.md)

---

**维护者**: AI Assistant
**最后更新**: 2024-12-21
