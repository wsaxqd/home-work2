# API 9.3 - 标记单个通知为已读

## 接口信息

- **接口名称**: 标记单个通知为已读
- **请求方法**: PUT
- **请求路径**: `/api/notifications/:id/read`
- **需要认证**: 是

---

## 接口描述

将指定的通知标记为已读状态，通常在用户点击查看通知时调用。

---

## 请求参数

### Header参数
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| Authorization | String | 是 | Bearer {accessToken} |

### Path参数
| 参数名 | 类型 | 必填 | 说明 | 示例 |
|--------|------|------|------|------|
| id | UUID | 是 | 通知ID | "550e8400-e29b-41d4-a716-446655440000" |

### 请求示例

```http
PUT /api/notifications/550e8400-e29b-41d4-a716-446655440000/read
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

---

## 响应结果

### 成功响应 (200 OK)

```json
{
  "success": true,
  "message": "已标记为已读",
  "data": {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "isRead": true,
    "readAt": "2024-12-22T10:30:00.000Z"
  }
}
```

### 错误响应

#### 401 Unauthorized - 未授权
```json
{
  "success": false,
  "message": "请先登录"
}
```

#### 403 Forbidden - 无权限
```json
{
  "success": false,
  "message": "无权操作此通知"
}
```

#### 404 Not Found - 通知不存在
```json
{
  "success": false,
  "message": "通知不存在"
}
```

#### 500 Internal Server Error - 服务器错误
```json
{
  "success": false,
  "message": "标记失败"
}
```

---

## 字段说明

### 响应字段
| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | UUID | 通知ID |
| isRead | Boolean | 已读状态(true) |
| readAt | DateTime | 阅读时间 |

---

## 业务规则

1. 只能标记自己的通知
2. 重复标记不会报错，保持幂等性
3. 标记后记录阅读时间
4. 已读通知不会影响未读数量统计
5. 不能将已读改为未读

---

## 使用场景

- 用户点击查看通知详情时
- 点击通知跳转到相关内容时
- 手动标记通知为已读
- 通知列表交互

---

## 注意事项

1. 建议在用户查看通知时立即调用
2. 接口具有幂等性，可重复调用
3. 标记后应更新本地未读数量
4. 不影响通知本身的内容和存在

---

## Postman测试

### 配置步骤
1. 创建新请求
2. 选择方法：`PUT`
3. 输入URL：`http://localhost:3000/api/notifications/{通知ID}/read`
4. 在Headers中添加：
   - Key: `Authorization`
   - Value: `Bearer {你的accessToken}`
5. 点击`Send`发送请求

### 预期结果
- 状态码：200
- 返回已读状态确认
- 未读数量减1

---

## 相关接口

- [9.1 获取通知列表](./9.1-notifications-list.md)
- [9.2 获取未读通知数量](./9.2-unread-count.md)
- [9.4 标记所有通知为已读](./9.4-mark-all-as-read.md)

---

## 更新记录

| 版本 | 日期 | 说明 |
|------|------|------|
| v1.0 | 2024-12-22 | 初始版本 |

---

**维护者**: AI Assistant
**最后更新**: 2024-12-22
