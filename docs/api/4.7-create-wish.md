# API 4.7 - 发布心愿

## 接口信息

- **接口名称**: 发布心愿
- **请求方法**: POST
- **请求路径**: `/api/community/wishes`
- **需要认证**: 是

---

## 接口描述

在心愿墙上发布一个新的心愿，分享自己的愿望和目标。

---

## 请求参数

### Header参数
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| Content-Type | String | 是 | application/json |
| Authorization | String | 是 | Bearer {accessToken} |

### Body参数
| 参数名 | 类型 | 必填 | 说明 | 示例 |
|--------|------|------|------|------|
| content | String | 是 | 心愿内容(1-200字符) | "希望学会画画" |
| category | String | 否 | 心愿分类 | "学习" |

### 请求示例

```json
{
  "content": "我希望能够创作出一个精彩的故事，让更多人喜欢！",
  "category": "创作"
}
```

---

## 响应结果

### 成功响应 (201 Created)

```json
{
  "success": true,
  "message": "心愿发布成功",
  "data": {
    "id": "550e8400-e29b-41d4-a716-446655440300",
    "user_id": "550e8400-e29b-41d4-a716-446655440001",
    "content": "我希望能够创作出一个精彩的故事，让更多人喜欢！",
    "category": "创作",
    "status": "pending",
    "support_count": 0,
    "created_at": "2024-12-21T16:00:00.000Z",
    "user": {
      "id": "550e8400-e29b-41d4-a716-446655440001",
      "nickname": "小明",
      "avatar": "https://example.com/avatar1.jpg"
    }
  }
}
```

### 错误响应

#### 400 Bad Request - 参数错误
```json
{
  "success": false,
  "message": "心愿内容不能为空"
}
```

#### 401 Unauthorized - 未授权
```json
{
  "success": false,
  "message": "未授权，请先登录"
}
```

#### 500 Internal Server Error - 服务器错误
```json
{
  "success": false,
  "message": "发布心愿失败"
}
```

---

## 字段说明

### 响应字段
| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | UUID | 心愿ID |
| user_id | UUID | 发布者ID |
| content | String | 心愿内容 |
| category | String | 心愿分类 |
| status | String | 心愿状态(pending/achieved) |
| support_count | Integer | 支持数 |
| created_at | DateTime | 发布时间 |
| user | Object | 发布者信息 |

---

## 业务规则

1. 心愿内容长度：1-200字符
2. 心愿分类可选：学习、创作、生活、其他
3. 新发布的心愿状态为pending
4. 每个用户可以发布多个心愿
5. 心愿内容需要进行敏感词过滤

---

## 使用场景

- 发布学习目标
- 分享创作愿望
- 记录梦想计划
- 社区互动激励

---

## 注意事项

1. 建议前端进行内容长度校验
2. 需要过滤敏感词和违规内容
3. 建议限制发布频率
4. 心愿内容应积极向上

---

## Postman测试

### 配置步骤
1. 创建新请求
2. 选择方法：`POST`
3. 输入URL：`http://localhost:3000/api/community/wishes`
4. 在Headers中添加：`Authorization: Bearer {accessToken}`
5. 选择Body标签
6. 选择`raw`和`JSON`格式
7. 输入请求体（见上方示例）
8. 点击`Send`发送请求

### 预期结果
- 状态码：201
- 返回心愿信息
- 心愿出现在心愿墙上

---

## 相关接口

- [4.8 获取心愿墙](./4.8-get-wishes.md)
- [4.9 支持心愿](./4.9-support-wish.md)
- [4.10 更新心愿状态](./4.10-update-wish-status.md)

---

## 更新记录

| 版本 | 日期 | 说明 |
|------|------|------|
| v1.0 | 2024-12-21 | 初始版本 |

---

**维护者**: AI Assistant
**最后更新**: 2024-12-21
