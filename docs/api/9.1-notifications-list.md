# API 9.1 - 获取通知列表

## 接口信息

- **接口名称**: 获取通知列表
- **请求方法**: GET
- **请求路径**: `/api/notifications`
- **需要认证**: 是

---

## 接口描述

获取当前用户的通知列表，支持按类型、状态筛选，按时间倒序排列。

---

## 请求参数

### Header参数
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| Authorization | String | 是 | Bearer {accessToken} |

### Query参数
| 参数名 | 类型 | 必填 | 说明 | 示例 |
|--------|------|------|------|------|
| type | String | 否 | 通知类型筛选 | "system", "comment", "like", "follow", "achievement" |
| isRead | Boolean | 否 | 已读状态筛选 | true, false |
| page | Number | 否 | 页码(默认1) | 1 |
| pageSize | Number | 否 | 每页数量(默认20) | 20 |

### 请求示例

```http
GET /api/notifications?type=comment&isRead=false&page=1&pageSize=20
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

---

## 响应结果

### 成功响应 (200 OK)

```json
{
  "success": true,
  "data": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440000",
      "type": "comment",
      "title": "新评论",
      "content": "用户"小红"评论了你的作品"美丽的风景"",
      "relatedId": "work-123",
      "relatedType": "work",
      "sender": {
        "id": "user-456",
        "nickname": "小红",
        "avatar": "https://example.com/avatar.jpg"
      },
      "isRead": false,
      "createdAt": "2024-12-22T10:30:00.000Z"
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440001",
      "type": "like",
      "title": "新点赞",
      "content": "用户"小明"点赞了你的作品",
      "relatedId": "work-123",
      "relatedType": "work",
      "sender": {
        "id": "user-789",
        "nickname": "小明",
        "avatar": "https://example.com/avatar2.jpg"
      },
      "isRead": false,
      "createdAt": "2024-12-22T09:15:00.000Z"
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440002",
      "type": "achievement",
      "title": "成就解锁",
      "content": "恭喜你解锁成就"创作达人"",
      "relatedId": "achievement-001",
      "relatedType": "achievement",
      "sender": null,
      "isRead": true,
      "createdAt": "2024-12-21T18:00:00.000Z"
    }
  ],
  "pagination": {
    "page": 1,
    "pageSize": 20,
    "total": 45,
    "totalPages": 3
  }
}
```

### 错误响应

#### 401 Unauthorized - 未授权
```json
{
  "success": false,
  "message": "请先登录"
}
```

#### 500 Internal Server Error - 服务器错误
```json
{
  "success": false,
  "message": "获取通知列表失败"
}
```

---

## 字段说明

### 响应字段
| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | UUID | 通知ID |
| type | String | 通知类型 |
| title | String | 通知标题 |
| content | String | 通知内容 |
| relatedId | String | 关联对象ID |
| relatedType | String | 关联对象类型 |
| sender | Object | 发送者信息(系统通知为null) |
| sender.id | String | 发送者ID |
| sender.nickname | String | 发送者昵称 |
| sender.avatar | String | 发送者头像 |
| isRead | Boolean | 是否已读 |
| createdAt | DateTime | 创建时间 |

---

## 通知类型说明

| 类型 | 说明 | 示例 |
|------|------|------|
| system | 系统通知 | 系统公告、维护通知 |
| comment | 评论通知 | 有人评论了你的作品 |
| like | 点赞通知 | 有人点赞了你的作品 |
| follow | 关注通知 | 有人关注了你 |
| achievement | 成就通知 | 解锁新成就 |

---

## 业务规则

1. 只能查看自己的通知
2. 按创建时间倒序排列(最新的在前)
3. 支持按类型和已读状态筛选
4. 未读通知会高亮显示
5. 通知保留30天，超期自动删除
6. 支持分页查询

---

## 使用场景

- 查看所有通知消息
- 筛选特定类型的通知
- 查看未读通知
- 通知中心页面展示

---

## 注意事项

1. 建议定期查看通知避免遗漏重要消息
2. 通知会自动过期删除，重要信息请及时处理
3. 可配合未读数量接口实现角标提示
4. 点击通知后应调用已读接口

---

## Postman测试

### 配置步骤
1. 创建新请求
2. 选择方法：`GET`
3. 输入URL：`http://localhost:3000/api/notifications?isRead=false`
4. 在Headers中添加：
   - Key: `Authorization`
   - Value: `Bearer {你的accessToken}`
5. 点击`Send`发送请求

### 预期结果
- 状态码：200
- 返回通知列表
- 包含分页信息

---

## 相关接口

- [9.2 获取未读通知数量](./9.2-unread-count.md)
- [9.3 标记单个通知为已读](./9.3-mark-as-read.md)
- [9.4 标记所有通知为已读](./9.4-mark-all-as-read.md)

---

## 更新记录

| 版本 | 日期 | 说明 |
|------|------|------|
| v1.0 | 2024-12-22 | 初始版本 |

---

**维护者**: AI Assistant
**最后更新**: 2024-12-22
