# API 3.5 - 获取作品详情

## 接口信息

- **接口名称**: 获取作品详情
- **请求方法**: GET
- **请求路径**: `/api/works/:id`
- **需要认证**: 可选

---

## 接口描述

获取指定作品的详细信息，包括作品内容、作者信息、互动数据等。公开作品无需认证，草稿作品需要作者本人认证。

---

## 请求参数

### Header参数
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| Authorization | String | 否 | Bearer {accessToken} |

### Path参数
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | UUID | 是 | 作品ID |

### 请求示例

```
GET /api/works/550e8400-e29b-41d4-a716-446655440100
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

---

## 响应结果

### 成功响应 (200 OK)

```json
{
  "success": true,
  "data": {
    "id": "550e8400-e29b-41d4-a716-446655440100",
    "title": "我的第一个故事",
    "type": "story",
    "status": "published",
    "cover_image": "https://example.com/cover1.jpg",
    "description": "这是一个有趣的故事",
    "content": "很久很久以前，在一个遥远的地方...",
    "tags": ["冒险", "友情", "成长"],
    "likes_count": 120,
    "comments_count": 35,
    "views_count": 581,
    "created_at": "2024-12-20T10:00:00.000Z",
    "updated_at": "2024-12-20T10:00:00.000Z",
    "published_at": "2024-12-20T10:30:00.000Z",
    "author": {
      "id": "550e8400-e29b-41d4-a716-446655440001",
      "nickname": "小明",
      "avatar": "https://example.com/avatar1.jpg",
      "bio": "热爱创作"
    },
    "is_liked": true,
    "is_author": false
  }
}
```

### 错误响应

#### 403 Forbidden - 无权访问
```json
{
  "success": false,
  "message": "无权访问该作品"
}
```

#### 404 Not Found - 作品不存在
```json
{
  "success": false,
  "message": "作品不存在"
}
```

#### 500 Internal Server Error - 服务器错误
```json
{
  "success": false,
  "message": "获取作品详情失败"
}
```

---

## 字段说明

### 响应字段
| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | UUID | 作品ID |
| title | String | 作品标题 |
| type | String | 作品类型 |
| status | String | 作品状态 |
| cover_image | String | 封面图片URL |
| description | String | 作品描述 |
| content | String | 作品完整内容 |
| tags | Array | 作品标签 |
| likes_count | Integer | 点赞数 |
| comments_count | Integer | 评论数 |
| views_count | Integer | 浏览数 |
| created_at | DateTime | 创建时间 |
| updated_at | DateTime | 更新时间 |
| published_at | DateTime | 发布时间 |
| author | Object | 作者信息 |
| is_liked | Boolean | 当前用户是否点赞（仅登录时返回） |
| is_author | Boolean | 当前用户是否为作者（仅登录时返回） |

---

## 业务规则

1. 公开作品（published）无需认证即可查看
2. 草稿作品（draft）仅作者本人可以查看
3. 已归档作品（archived）仅作者本人可以查看
4. 每次查看浏览数自动+1（同一用户24小时内只计数一次）
5. 已删除的作品返回404

---

## 使用场景

- 查看作品详情页
- 阅读作品内容
- 作品分享链接
- 作品编辑预览

---

## 注意事项

1. 浏览数统计建议使用防刷机制
2. 长内容建议分段加载
3. 图片和视频内容建议使用CDN
4. 建议缓存热门作品详情

---

## Postman测试

### 配置步骤
1. 创建新请求
2. 选择方法：`GET`
3. 输入URL：`http://localhost:3000/api/works/{workId}`
4. （可选）在Headers中添加：`Authorization: Bearer {accessToken}`
5. 点击`Send`发送请求

### 预期结果
- 状态码：200
- 返回作品完整信息
- 浏览数增加1

---

## 相关接口

- [3.4 获取用户作品列表](./3.4-user-works.md)
- [3.6 更新作品](./3.6-update-work.md)
- [4.1 点赞作品](./4.1-like-work.md)
- [4.3 发表评论](./4.3-create-comment.md)

---

## 更新记录

| 版本 | 日期 | 说明 |
|------|------|------|
| v1.0 | 2024-12-21 | 初始版本 |

---

**维护者**: AI Assistant
**最后更新**: 2024-12-21
