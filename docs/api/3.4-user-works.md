# API 3.4 - 获取用户作品列表

## 接口信息

- **接口名称**: 获取用户作品列表
- **请求方法**: GET
- **请求路径**: `/api/works`
- **需要认证**: 是

---

## 接口描述

获取当前登录用户的所有作品列表，包括草稿和已发布的作品。

---

## 请求参数

### Header参数
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| Authorization | String | 是 | Bearer {accessToken} |

### Query参数
| 参数名 | 类型 | 必填 | 说明 | 默认值 |
|--------|------|------|------|--------|
| page | Integer | 否 | 页码 | 1 |
| pageSize | Integer | 否 | 每页数量 | 20 |
| type | String | 否 | 作品类型 | 全部 |
| status | String | 否 | 作品状态(draft/published/archived) | 全部 |
| sortBy | String | 否 | 排序字段 | created_at |
| order | String | 否 | 排序方式(asc/desc) | desc |

### 请求示例

```
GET /api/works?page=1&pageSize=20&status=published
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

---

## 响应结果

### 成功响应 (200 OK)

```json
{
  "success": true,
  "data": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440100",
      "title": "我的第一个故事",
      "type": "story",
      "status": "published",
      "cover_image": "https://example.com/cover1.jpg",
      "description": "这是一个有趣的故事",
      "content": "故事的完整内容...",
      "likes_count": 120,
      "comments_count": 35,
      "views_count": 580,
      "created_at": "2024-12-20T10:00:00.000Z",
      "updated_at": "2024-12-20T10:00:00.000Z",
      "published_at": "2024-12-20T10:30:00.000Z"
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440101",
      "title": "未完成的画作",
      "type": "art",
      "status": "draft",
      "cover_image": "https://example.com/cover2.jpg",
      "description": "还在创作中",
      "content": null,
      "likes_count": 0,
      "comments_count": 0,
      "views_count": 0,
      "created_at": "2024-12-21T09:00:00.000Z",
      "updated_at": "2024-12-21T09:30:00.000Z",
      "published_at": null
    }
  ],
  "pagination": {
    "page": 1,
    "pageSize": 20,
    "total": 25,
    "totalPages": 2
  }
}
```

### 错误响应

#### 401 Unauthorized - 未授权
```json
{
  "success": false,
  "message": "未授权，请先登录"
}
```

#### 500 Internal Server Error - 服务器错误
```json
{
  "success": false,
  "message": "获取作品列表失败"
}
```

---

## 字段说明

### 响应字段
| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | UUID | 作品ID |
| title | String | 作品标题 |
| type | String | 作品类型 |
| status | String | 作品状态(draft/published/archived) |
| cover_image | String | 封面图片URL |
| description | String | 作品描述 |
| content | String | 作品内容 |
| likes_count | Integer | 点赞数 |
| comments_count | Integer | 评论数 |
| views_count | Integer | 浏览数 |
| created_at | DateTime | 创建时间 |
| updated_at | DateTime | 更新时间 |
| published_at | DateTime | 发布时间(草稿为null) |

---

## 业务规则

1. 只返回当前用户创建的作品
2. 包含所有状态的作品（草稿、已发布、已归档）
3. 默认按创建时间倒序排列
4. 草稿作品的published_at为null
5. 已删除的作品不返回

---

## 使用场景

- 个人作品管理页面
- 查看自己的创作历史
- 编辑或删除自己的作品
- 统计作品数据

---

## 注意事项

1. 建议分页加载，避免一次加载过多数据
2. 草稿作品仅作者本人可见
3. 可以根据状态筛选作品类型

---

## Postman测试

### 配置步骤
1. 创建新请求
2. 选择方法：`GET`
3. 输入URL：`http://localhost:3000/api/works?page=1&pageSize=20`
4. 在Headers中添加：`Authorization: Bearer {accessToken}`
5. 点击`Send`发送请求

### 预期结果
- 状态码：200
- 返回当前用户的作品列表

---

## 相关接口

- [3.3 创建作品](./3.3-create-work.md)
- [3.5 获取作品详情](./3.5-work-detail.md)
- [3.6 更新作品](./3.6-update-work.md)
- [3.7 删除作品](./3.7-delete-work.md)

---

## 更新记录

| 版本 | 日期 | 说明 |
|------|------|------|
| v1.0 | 2024-12-21 | 初始版本 |

---

**维护者**: AI Assistant
**最后更新**: 2024-12-21
