# API 6.7 - 删除日记

## 接口信息

- **接口名称**: 删除日记
- **请求方法**: DELETE
- **请求路径**: `/api/diary/:id`
- **需要认证**: 是

---

## 接口描述

删除指定的日记，删除后不可恢复。

---

## 请求参数

### Header参数
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| Authorization | String | 是 | Bearer {accessToken} |

### Path参数
| 参数名 | 类型 | 必填 | 说明 | 示例 |
|--------|------|------|------|------|
| id | UUID | 是 | 日记ID | "550e8400-e29b-41d4-a716-446655440000" |

### 请求示例

```
DELETE /api/diary/550e8400-e29b-41d4-a716-446655440000
```

---

## 响应结果

### 成功响应 (200 OK)

```json
{
  "success": true,
  "message": "删除成功"
}
```

### 错误响应

#### 401 Unauthorized - 未授权
```json
{
  "success": false,
  "message": "未授权，请先登录"
}
```

#### 403 Forbidden - 无权限
```json
{
  "success": false,
  "message": "无权删除该日记"
}
```

#### 404 Not Found - 不存在
```json
{
  "success": false,
  "message": "日记不存在"
}
```

#### 500 Internal Server Error - 服务器错误
```json
{
  "success": false,
  "message": "删除日记失败，请稍后重试"
}
```

---

## 字段说明

### 响应字段
| 字段名 | 类型 | 说明 |
|--------|------|------|
| success | Boolean | 操作是否成功 |
| message | String | 响应消息 |

---

## 业务规则

1. 只能删除自己的日记
2. 删除操作不可恢复
3. 删除日记时，关联的图片不会被删除
4. 删除后会影响日历数据和统计数据
5. 删除操作应记录日志

---

## 使用场景

- 删除不需要的日记
- 清理敏感内容
- 误创建日记后删除

---

## 注意事项

1. 删除操作不可恢复，建议前端二次确认
2. 需要严格校验权限
3. 建议实现软删除（标记删除而不是物理删除）
4. 删除后相关统计数据需要更新
5. 关联的图片文件需要单独管理

---

## Postman测试

### 配置步骤
1. 创建新请求
2. 选择方法：`DELETE`
3. 输入URL：`http://localhost:3000/api/diary/{日记ID}`
4. 在Headers中添加：
   - `Authorization`: `Bearer {你的accessToken}`
5. 点击`Send`发送请求

### 预期结果
- 状态码：200
- 返回成功消息
- 再次查询该日记会返回404

---

## 相关接口

- [6.1 创建日记](./6.1-create-diary.md)
- [6.2 获取日记列表](./6.2-get-diary-list.md)
- [6.5 获取日记详情](./6.5-get-diary-detail.md)
- [6.6 更新日记](./6.6-update-diary.md)

---

## 更新记录

| 版本 | 日期 | 说明 |
|------|------|------|
| v1.0 | 2024-12-22 | 初始版本 |

---

**维护者**: AI Assistant
**最后更新**: 2024-12-22
