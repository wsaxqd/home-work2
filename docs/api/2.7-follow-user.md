# API 2.7 - 关注用户

## 接口信息

- **接口名称**: 关注用户
- **请求方法**: POST
- **请求路径**: `/api/users/:id/follow`
- **需要认证**: 是

---

## 接口描述

关注指定用户，建立关注关系。如果已经关注，则返回提示信息。

---

## 请求参数

### Header参数
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| Authorization | String | 是 | Bearer {accessToken} |

### Path参数
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | UUID | 是 | 要关注的用户ID |

### 请求示例

```
POST /api/users/550e8400-e29b-41d4-a716-446655440000/follow
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

---

## 响应结果

### 成功响应 (200 OK)

```json
{
  "success": true,
  "message": "关注成功",
  "data": {
    "follower_id": "550e8400-e29b-41d4-a716-446655440001",
    "following_id": "550e8400-e29b-41d4-a716-446655440000",
    "created_at": "2024-12-21T15:30:00.000Z"
  }
}
```

### 错误响应

#### 400 Bad Request - 不能关注自己
```json
{
  "success": false,
  "message": "不能关注自己"
}
```

#### 400 Bad Request - 已经关注
```json
{
  "success": false,
  "message": "已经关注该用户"
}
```

#### 401 Unauthorized - 未授权
```json
{
  "success": false,
  "message": "未授权，请先登录"
}
```

#### 404 Not Found - 用户不存在
```json
{
  "success": false,
  "message": "用户不存在"
}
```

#### 500 Internal Server Error - 服务器错误
```json
{
  "success": false,
  "message": "关注失败，请稍后重试"
}
```

---

## 字段说明

### 响应字段
| 字段名 | 类型 | 说明 |
|--------|------|------|
| follower_id | UUID | 关注者ID（当前用户） |
| following_id | UUID | 被关注者ID |
| created_at | DateTime | 关注时间 |

---

## 业务规则

1. 不能关注自己
2. 不能重复关注同一用户
3. 关注成功后，被关注用户收到通知
4. 关注关系会影响内容推荐算法
5. 被关注者的粉丝数+1，关注者的关注数+1

---

## 使用场景

- 用户主页点击关注按钮
- 推荐用户列表中关注
- 作品详情页关注作者
- 评论区关注评论者

---

## 注意事项

1. 关注操作应该是幂等的
2. 建议防止短时间内频繁关注/取消关注
3. 关注成功后应发送通知给被关注者
4. 前端应及时更新关注状态

---

## Postman测试

### 配置步骤
1. 创建新请求
2. 选择方法：`POST`
3. 输入URL：`http://localhost:3000/api/users/{userId}/follow`
4. 在Headers中添加：`Authorization: Bearer {accessToken}`
5. 点击`Send`发送请求

### 预期结果
- 状态码：200
- 返回关注关系信息
- 被关注用户收到通知

---

## 相关接口

- [2.8 取消关注](./2.8-unfollow-user.md)
- [2.4 获取粉丝列表](./2.4-followers.md)
- [2.5 获取关注列表](./2.5-following.md)
- [9.1 获取通知列表](./9.1-notifications-list.md)

---

## 更新记录

| 版本 | 日期 | 说明 |
|------|------|------|
| v1.0 | 2024-12-21 | 初始版本 |

---

**维护者**: AI Assistant
**最后更新**: 2024-12-21
