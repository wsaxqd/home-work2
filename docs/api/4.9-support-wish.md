# API 4.9 - 支持心愿

## 接口信息

- **接口名称**: 支持心愿
- **请求方法**: POST
- **请求路径**: `/api/community/wishes/:id/support`
- **需要认证**: 是

---

## 接口描述

为指定心愿加油支持，表示鼓励和祝福。

---

## 请求参数

### Header参数
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| Authorization | String | 是 | Bearer {accessToken} |

### Path参数
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | UUID | 是 | 心愿ID |

### 请求示例

```
POST /api/community/wishes/550e8400-e29b-41d4-a716-446655440300/support
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

---

## 响应结果

### 成功响应 (200 OK)

```json
{
  "success": true,
  "message": "支持成功",
  "data": {
    "wish_id": "550e8400-e29b-41d4-a716-446655440300",
    "user_id": "550e8400-e29b-41d4-a716-446655440002",
    "created_at": "2024-12-21T16:30:00.000Z"
  }
}
```

### 错误响应

#### 400 Bad Request - 已支持
```json
{
  "success": false,
  "message": "已经支持过该心愿"
}
```

#### 400 Bad Request - 不能支持自己的心愿
```json
{
  "success": false,
  "message": "不能支持自己的心愿"
}
```

#### 401 Unauthorized - 未授权
```json
{
  "success": false,
  "message": "未授权，请先登录"
}
```

#### 404 Not Found - 心愿不存在
```json
{
  "success": false,
  "message": "心愿不存在"
}
```

#### 500 Internal Server Error - 服务器错误
```json
{
  "success": false,
  "message": "支持失败"
}
```

---

## 字段说明

### 响应字段
| 字段名 | 类型 | 说明 |
|--------|------|------|
| wish_id | UUID | 心愿ID |
| user_id | UUID | 支持者ID |
| created_at | DateTime | 支持时间 |

---

## 业务规则

1. 用户不能支持自己的心愿
2. 每个用户对同一心愿只能支持一次
3. 支持成功后心愿的支持数+1
4. 心愿发布者会收到支持通知
5. 支持操作是幂等的

---

## 使用场景

- 为他人心愿加油
- 表达鼓励和祝福
- 增加心愿热度
- 社区互动

---

## 注意事项

1. 建议添加防抖，避免重复点击
2. 支持后应立即更新UI显示
3. 可以添加支持动画效果
4. 注意防止刷支持行为

---

## Postman测试

### 配置步骤
1. 创建新请求
2. 选择方法：`POST`
3. 输入URL：`http://localhost:3000/api/community/wishes/{wishId}/support`
4. 在Headers中添加：`Authorization: Bearer {accessToken}`
5. 点击`Send`发送请求

### 预期结果
- 状态码：200
- 返回支持记录信息
- 心愿支持数+1
- 发布者收到通知

---

## 相关接口

- [4.7 发布心愿](./4.7-create-wish.md)
- [4.8 获取心愿墙](./4.8-get-wishes.md)
- [9.1 获取通知列表](./9.1-notifications-list.md)

---

## 更新记录

| 版本 | 日期 | 说明 |
|------|------|------|
| v1.0 | 2024-12-21 | 初始版本 |

---

**维护者**: AI Assistant
**最后更新**: 2024-12-21
