# API 4.5 - 获取评论回复

## 接口信息

- **接口名称**: 获取评论回复
- **请求方法**: GET
- **请求路径**: `/api/community/comments/:id/replies`
- **需要认证**: 否

---

## 接口描述

获取指定评论的所有回复列表，支持分页。

---

## 请求参数

### Path参数
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | UUID | 是 | 父评论ID |

### Query参数
| 参数名 | 类型 | 必填 | 说明 | 默认值 |
|--------|------|------|------|--------|
| page | Integer | 否 | 页码 | 1 |
| pageSize | Integer | 否 | 每页数量 | 20 |

### 请求示例

```
GET /api/community/comments/550e8400-e29b-41d4-a716-446655440201/replies?page=1&pageSize=20
```

---

## 响应结果

### 成功响应 (200 OK)

```json
{
  "success": true,
  "data": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440203",
      "work_id": "550e8400-e29b-41d4-a716-446655440100",
      "content": "我也这么觉得！",
      "parent_id": "550e8400-e29b-41d4-a716-446655440201",
      "created_at": "2024-12-21T15:35:00.000Z",
      "user": {
        "id": "550e8400-e29b-41d4-a716-446655440002",
        "nickname": "小红",
        "avatar": "https://example.com/avatar2.jpg"
      },
      "reply_to": {
        "id": "550e8400-e29b-41d4-a716-446655440001",
        "nickname": "小明"
      }
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440204",
      "work_id": "550e8400-e29b-41d4-a716-446655440100",
      "content": "谢谢支持！",
      "parent_id": "550e8400-e29b-41d4-a716-446655440201",
      "created_at": "2024-12-21T15:40:00.000Z",
      "user": {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "nickname": "作者",
        "avatar": "https://example.com/avatar0.jpg"
      },
      "reply_to": {
        "id": "550e8400-e29b-41d4-a716-446655440001",
        "nickname": "小明"
      }
    }
  ],
  "pagination": {
    "page": 1,
    "pageSize": 20,
    "total": 3,
    "totalPages": 1
  }
}
```

### 错误响应

#### 404 Not Found - 评论不存在
```json
{
  "success": false,
  "message": "评论不存在"
}
```

#### 500 Internal Server Error - 服务器错误
```json
{
  "success": false,
  "message": "获取回复列表失败"
}
```

---

## 字段说明

### 响应字段
| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | UUID | 回复ID |
| work_id | UUID | 作品ID |
| content | String | 回复内容 |
| parent_id | UUID | 父评论ID |
| created_at | DateTime | 回复时间 |
| user | Object | 回复者信息 |
| reply_to | Object | 被回复者信息 |

---

## 业务规则

1. 返回指定评论的所有回复
2. 按时间正序排列（最早的在前）
3. 已删除的回复不返回
4. 支持分页查询
5. 回复深度限制为2层（评论->回复）

---

## 使用场景

- 展开查看评论的回复
- 评论详情页
- 回复列表加载
- 评论互动展示

---

## 注意事项

1. 建议使用分页加载
2. 回复内容应支持换行显示
3. 可以高亮显示被回复者
4. 建议显示回复关系链

---

## Postman测试

### 配置步骤
1. 创建新请求
2. 选择方法：`GET`
3. 输入URL：`http://localhost:3000/api/community/comments/{commentId}/replies?page=1&pageSize=20`
4. 点击`Send`发送请求

### 预期结果
- 状态码：200
- 返回回复列表和分页信息
- 包含被回复者信息

---

## 相关接口

- [4.3 发表评论](./4.3-create-comment.md)
- [4.4 获取评论列表](./4.4-get-comments.md)
- [4.6 删除评论](./4.6-delete-comment.md)

---

## 更新记录

| 版本 | 日期 | 说明 |
|------|------|------|
| v1.0 | 2024-12-21 | 初始版本 |

---

**维护者**: AI Assistant
**最后更新**: 2024-12-21
