# å®¶é•¿ç«¯å®Œæ•´å®æ–½æ–¹æ¡ˆ

> **åŠŸèƒ½åç§°**: å®¶é•¿ç›‘æŠ¤ç³»ç»Ÿ
> **ç›®æ ‡ç”¨æˆ·**: 6-12å²å„¿ç«¥çš„å®¶é•¿
> **æ ¸å¿ƒä»·å€¼**: è®©å®¶é•¿äº†è§£å­©å­å­¦ä¹ æƒ…å†µï¼Œä¿éšœä½¿ç”¨å®‰å…¨
> **å¼€å‘å‘¨æœŸ**: 3-4å‘¨

---

## ğŸ“‹ ç›®å½•

1. [éœ€æ±‚åˆ†æ](#éœ€æ±‚åˆ†æ)
2. [åŠŸèƒ½è®¾è®¡](#åŠŸèƒ½è®¾è®¡)
3. [æ•°æ®åº“è®¾è®¡](#æ•°æ®åº“è®¾è®¡)
4. [åç«¯APIè®¾è®¡](#åç«¯apiè®¾è®¡)
5. [å‰ç«¯é¡µé¢è®¾è®¡](#å‰ç«¯é¡µé¢è®¾è®¡)
6. [å®æ–½æ­¥éª¤](#å®æ–½æ­¥éª¤)
7. [å®‰å…¨è€ƒè™‘](#å®‰å…¨è€ƒè™‘)

---

## ğŸ¯ éœ€æ±‚åˆ†æ

### æ ¸å¿ƒéœ€æ±‚

#### 1. å®¶é•¿å¿…é¡»èƒ½åšçš„äº‹ï¼ˆP0ï¼‰
- âœ… ç»‘å®šå­©å­è´¦å·
- âœ… æŸ¥çœ‹å­©å­ä½¿ç”¨æ—¶é•¿å’Œæ´»è·ƒåº¦
- âœ… æŸ¥çœ‹å­©å­åˆ›ä½œå†…å®¹ï¼ˆä½œå“ã€æ—¥è®°ï¼‰
- âœ… æŸ¥çœ‹å­©å­å­¦ä¹ æŠ¥å‘Š
- âœ… è®¾ç½®ä½¿ç”¨æ—¶é—´é™åˆ¶
- âœ… æ¥æ”¶å¼‚å¸¸è¡Œä¸ºæé†’

#### 2. å®¶é•¿å¸Œæœ›èƒ½åšçš„äº‹ï¼ˆP1ï¼‰
- â¬œ ä¸å­©å­äº’åŠ¨ï¼ˆç‚¹èµä½œå“ã€ç•™è¨€ï¼‰
- â¬œ æŸ¥çœ‹å­©å­ç¤¾äº¤æƒ…å†µï¼ˆå¥½å‹åˆ—è¡¨ã€äº’åŠ¨è®°å½•ï¼‰
- â¬œ è®¾ç½®å†…å®¹è¿‡æ»¤è§„åˆ™
- â¬œ å¯¼å‡ºå­¦ä¹ æŠ¥å‘Šï¼ˆPDFï¼‰
- â¬œ è®¾ç½®æ¯æ—¥å­¦ä¹ ç›®æ ‡

#### 3. å¯é€‰åŠŸèƒ½ï¼ˆP2ï¼‰
- â¬œ å¤šå­©å­è´¦å·ç®¡ç†
- â¬œ å®¶é•¿ç¤¾åŒºäº¤æµ
- â¬œ æ•™è‚²èµ„æºæ¨è
- â¬œ ä¸“å®¶å’¨è¯¢å…¥å£

### ç”¨æˆ·åœºæ™¯

#### åœºæ™¯1ï¼šé¦–æ¬¡ä½¿ç”¨
```
1. å®¶é•¿ä¸‹è½½åº”ç”¨/è®¿é—®ç½‘é¡µ
2. æ³¨å†Œå®¶é•¿è´¦å·
3. è¾“å…¥å­©å­è´¦å·/æ‰«æäºŒç»´ç ç»‘å®š
4. å­©å­ç¡®è®¤ç»‘å®šè¯·æ±‚
5. è¿›å…¥å®¶é•¿ç«¯ä¸»é¡µï¼ŒæŸ¥çœ‹å­©å­æ¦‚å†µ
```

#### åœºæ™¯2ï¼šæ—¥å¸¸ç›‘æ§
```
1. å®¶é•¿ç™»å½•
2. æŸ¥çœ‹ä»Šæ—¥ä½¿ç”¨æ—¶é•¿
3. æµè§ˆå­©å­æœ€æ–°åˆ›ä½œ
4. æŸ¥çœ‹å­¦ä¹ è¿›åº¦æŠ¥å‘Š
5. å‘ç°å¼‚å¸¸è¡Œä¸ºï¼Œè®¾ç½®æ—¶é—´é™åˆ¶
```

#### åœºæ™¯3ï¼šå‘¨æŠ¥æŸ¥çœ‹
```
1. æ¯å‘¨ä¸€æ”¶åˆ°ç³»ç»Ÿæ¨é€
2. æ‰“å¼€æœ¬å‘¨å­¦ä¹ æŠ¥å‘Š
3. æŸ¥çœ‹å„é¡¹æ•°æ®å¯¹æ¯”
4. å¯¼å‡ºPDFä¿å­˜
5. ä¸å­©å­æ²Ÿé€šå­¦ä¹ æƒ…å†µ
```

---

## ğŸ¨ åŠŸèƒ½è®¾è®¡

### åŠŸèƒ½æ¨¡å—åœ°å›¾

```
å®¶é•¿ç«¯
â”œâ”€â”€ è´¦å·ç®¡ç†
â”‚   â”œâ”€â”€ å®¶é•¿æ³¨å†Œ/ç™»å½•
â”‚   â”œâ”€â”€ ç»‘å®šå­©å­è´¦å·
â”‚   â”œâ”€â”€ ç®¡ç†å¤šä¸ªå­©å­
â”‚   â””â”€â”€ è§£é™¤ç»‘å®š
â”œâ”€â”€ å®æ—¶ç›‘æ§
â”‚   â”œâ”€â”€ ä»Šæ—¥ä½¿ç”¨æ—¶é•¿
â”‚   â”œâ”€â”€ åœ¨çº¿çŠ¶æ€
â”‚   â”œâ”€â”€ å½“å‰æ´»åŠ¨
â”‚   â””â”€â”€ è®¾å¤‡ä¿¡æ¯
â”œâ”€â”€ å†…å®¹æŸ¥çœ‹
â”‚   â”œâ”€â”€ åˆ›ä½œä½œå“å±•ç¤º
â”‚   â”œâ”€â”€ å¿ƒçµèŠ±å›­æ—¥è®°
â”‚   â”œâ”€â”€ æ¸¸æˆè®°å½•
â”‚   â””â”€â”€ ç¤¾äº¤äº’åŠ¨
â”œâ”€â”€ å­¦ä¹ æŠ¥å‘Š
â”‚   â”œâ”€â”€ æ¯æ—¥æ€»ç»“
â”‚   â”œâ”€â”€ æ¯å‘¨æŠ¥å‘Š
â”‚   â”œâ”€â”€ æœˆåº¦åˆ†æ
â”‚   â””â”€â”€ èƒ½åŠ›è¯„ä¼°ç»“æœ
â”œâ”€â”€ ä½¿ç”¨ç®¡æ§
â”‚   â”œâ”€â”€ æ—¶é—´é™åˆ¶è®¾ç½®
â”‚   â”œâ”€â”€ åŠŸèƒ½ç¦ç”¨
â”‚   â”œâ”€â”€ å†…å®¹è¿‡æ»¤
â”‚   â””â”€â”€ ç´§æ€¥é”å®š
â”œâ”€â”€ æ¶ˆæ¯é€šçŸ¥
â”‚   â”œâ”€â”€ å¼‚å¸¸è¡Œä¸ºæé†’
â”‚   â”œâ”€â”€ å­¦ä¹ æŠ¥å‘Šæ¨é€
â”‚   â”œâ”€â”€ ä½œå“å®Œæˆé€šçŸ¥
â”‚   â””â”€â”€ ç³»ç»Ÿå…¬å‘Š
â””â”€â”€ è®¾ç½®ä¸­å¿ƒ
    â”œâ”€â”€ å®¶é•¿èµ„æ–™
    â”œâ”€â”€ é€šçŸ¥åå¥½
    â”œâ”€â”€ éšç§è®¾ç½®
    â””â”€â”€ å¸®åŠ©ä¸­å¿ƒ
```

---

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### æ–°å¢è¡¨ç»“æ„

#### 1. å®¶é•¿è´¦å·è¡¨ (parents)

```sql
CREATE TABLE parents (
  id SERIAL PRIMARY KEY,
  phone VARCHAR(20) UNIQUE NOT NULL,
  email VARCHAR(100) UNIQUE,
  password_hash VARCHAR(255) NOT NULL,
  name VARCHAR(50) NOT NULL,
  avatar VARCHAR(255),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  last_login TIMESTAMP
);

CREATE INDEX idx_parents_phone ON parents(phone);
CREATE INDEX idx_parents_email ON parents(email);
```

#### 2. å®¶é•¿-å­©å­ç»‘å®šè¡¨ (parent_child_bindings)

```sql
CREATE TABLE parent_child_bindings (
  id SERIAL PRIMARY KEY,
  parent_id INTEGER NOT NULL REFERENCES parents(id) ON DELETE CASCADE,
  child_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  relation VARCHAR(20) NOT NULL CHECK (relation IN ('father', 'mother', 'guardian', 'other')),
  status VARCHAR(20) NOT NULL DEFAULT 'pending' CHECK (status IN ('pending', 'approved', 'rejected')),
  request_code VARCHAR(10) UNIQUE, -- ç»‘å®šéªŒè¯ç 
  bound_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  UNIQUE(parent_id, child_id)
);

CREATE INDEX idx_bindings_parent ON parent_child_bindings(parent_id);
CREATE INDEX idx_bindings_child ON parent_child_bindings(child_id);
CREATE INDEX idx_bindings_code ON parent_child_bindings(request_code);
```

#### 3. ä½¿ç”¨æ—¶é•¿è®°å½•è¡¨ (usage_logs)

```sql
CREATE TABLE usage_logs (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  session_start TIMESTAMP NOT NULL,
  session_end TIMESTAMP,
  duration INTEGER, -- ç§’
  device_info JSONB, -- è®¾å¤‡ä¿¡æ¯
  activities JSONB, -- æ´»åŠ¨è®°å½• [{type: 'game', id: 1, duration: 300}]
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_usage_user_date ON usage_logs(user_id, DATE(session_start));
```

#### 4. å®¶é•¿æ§åˆ¶è®¾ç½®è¡¨ (parental_controls)

```sql
CREATE TABLE parental_controls (
  id SERIAL PRIMARY KEY,
  child_id INTEGER NOT NULL UNIQUE REFERENCES users(id) ON DELETE CASCADE,
  daily_time_limit INTEGER DEFAULT 7200, -- æ¯æ—¥æ—¶é•¿é™åˆ¶(ç§’) é»˜è®¤2å°æ—¶
  allowed_time_ranges JSONB, -- å…è®¸ä½¿ç”¨æ—¶é—´æ®µ [{"start":"08:00", "end":"20:00"}]
  blocked_features JSONB, -- ç¦ç”¨åŠŸèƒ½åˆ—è¡¨ ["games", "social"]
  content_filter_level VARCHAR(20) DEFAULT 'medium', -- low/medium/high
  emergency_lock BOOLEAN DEFAULT false, -- ç´§æ€¥é”å®š
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_by INTEGER REFERENCES parents(id)
);

CREATE INDEX idx_controls_child ON parental_controls(child_id);
```

#### 5. å¼‚å¸¸è¡Œä¸ºè®°å½•è¡¨ (behavior_alerts)

```sql
CREATE TABLE behavior_alerts (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  alert_type VARCHAR(50) NOT NULL, -- 'overtime', 'inappropriate_content', 'unusual_activity'
  severity VARCHAR(20) NOT NULL, -- 'low', 'medium', 'high'
  description TEXT NOT NULL,
  details JSONB,
  read_by_parent BOOLEAN DEFAULT false,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_alerts_user ON behavior_alerts(user_id);
CREATE INDEX idx_alerts_unread ON behavior_alerts(read_by_parent, created_at DESC);
```

#### 6. å®¶é•¿é€šçŸ¥è¡¨ (parent_notifications)

```sql
CREATE TABLE parent_notifications (
  id SERIAL PRIMARY KEY,
  parent_id INTEGER NOT NULL REFERENCES parents(id) ON DELETE CASCADE,
  child_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
  type VARCHAR(50) NOT NULL, -- 'report', 'alert', 'achievement', 'work'
  title VARCHAR(200) NOT NULL,
  content TEXT NOT NULL,
  link VARCHAR(255), -- è·³è½¬é“¾æ¥
  read BOOLEAN DEFAULT false,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_parent_notif_parent ON parent_notifications(parent_id, read);
```

### ä¿®æ”¹ç°æœ‰è¡¨

#### ä¿®æ”¹ users è¡¨ï¼ˆæ·»åŠ å®¶é•¿æ§åˆ¶ç›¸å…³å­—æ®µï¼‰

```sql
ALTER TABLE users ADD COLUMN has_parent_control BOOLEAN DEFAULT false;
ALTER TABLE users ADD COLUMN last_activity_at TIMESTAMP;
```

---

## ğŸ”§ åç«¯APIè®¾è®¡

### 1. å®¶é•¿è®¤è¯æ¨¡å—

#### å®¶é•¿æ³¨å†Œ
```typescript
POST /api/parents/auth/register
Request:
{
  "phone": "13800138000",
  "password": "password123",
  "name": "å¼ å¥³å£«",
  "email": "optional@example.com"
}
Response:
{
  "success": true,
  "data": {
    "parent": { id, phone, name, avatar },
    "accessToken": "...",
    "refreshToken": "..."
  }
}
```

#### å®¶é•¿ç™»å½•
```typescript
POST /api/parents/auth/login
Request:
{
  "phone": "13800138000",
  "password": "password123"
}
Response:
{
  "success": true,
  "data": {
    "parent": { id, phone, name, avatar },
    "children": [{ id, nickname, avatar, relation }],
    "accessToken": "...",
    "refreshToken": "..."
  }
}
```

### 2. ç»‘å®šç®¡ç†æ¨¡å—

#### å‘èµ·ç»‘å®šè¯·æ±‚
```typescript
POST /api/parents/binding/request
Headers: Authorization: Bearer {parentToken}
Request:
{
  "childPhone": "13900139000", // æˆ– childId
  "relation": "mother"
}
Response:
{
  "success": true,
  "data": {
    "bindingId": 123,
    "requestCode": "ABC123", // 6ä½éªŒè¯ç 
    "expiresAt": "2026-01-12T10:00:00Z"
  }
}
```

#### å­©å­ç¡®è®¤ç»‘å®š
```typescript
POST /api/parents/binding/confirm
Headers: Authorization: Bearer {childToken}
Request:
{
  "requestCode": "ABC123"
}
Response:
{
  "success": true,
  "data": {
    "parent": { id, name, relation },
    "message": "ç»‘å®šæˆåŠŸ"
  }
}
```

#### è·å–ç»‘å®šåˆ—è¡¨
```typescript
GET /api/parents/binding/list
Headers: Authorization: Bearer {parentToken}
Response:
{
  "success": true,
  "data": [
    {
      "childId": 10,
      "nickname": "å°æ˜",
      "avatar": "...",
      "relation": "mother",
      "status": "approved",
      "boundAt": "2026-01-01T10:00:00Z"
    }
  ]
}
```

#### è§£é™¤ç»‘å®š
```typescript
DELETE /api/parents/binding/{childId}
Headers: Authorization: Bearer {parentToken}
Response:
{
  "success": true,
  "message": "å·²è§£é™¤ç»‘å®š"
}
```

### 3. ç›‘æ§æŸ¥çœ‹æ¨¡å—

#### è·å–å­©å­æ¦‚è§ˆ
```typescript
GET /api/parents/children/{childId}/overview
Headers: Authorization: Bearer {parentToken}
Query: ?date=2026-01-11 (å¯é€‰ï¼Œé»˜è®¤ä»Šå¤©)
Response:
{
  "success": true,
  "data": {
    "child": { id, nickname, avatar, age },
    "today": {
      "totalDuration": 3600, // ç§’
      "isOnline": true,
      "currentActivity": "story-creator",
      "lastActive": "2026-01-11T15:30:00Z"
    },
    "activities": [
      { type: "game", name: "è¡¨æƒ…è¯†åˆ«", duration: 600 },
      { type: "create", name: "æ•…äº‹åˆ›ä½œ", duration: 1200 }
    ],
    "recentWorks": [
      { id: 1, type: "story", title: "å°å…”å­çš„å†’é™©", createdAt: "..." }
    ],
    "alerts": [
      { id: 1, type: "overtime", severity: "medium", message: "ä»Šæ—¥ä½¿ç”¨æ—¶é•¿å·²è¶…è¿‡å»ºè®®å€¼" }
    ]
  }
}
```

#### è·å–ä½¿ç”¨æ—¶é•¿ç»Ÿè®¡
```typescript
GET /api/parents/children/{childId}/usage-stats
Headers: Authorization: Bearer {parentToken}
Query: ?range=week (day/week/month)
Response:
{
  "success": true,
  "data": {
    "range": "week",
    "total": 18000, // æ€»ç§’æ•°
    "daily": [
      { date: "2026-01-05", duration: 3600 },
      { date: "2026-01-06", duration: 2400 },
      ...
    ],
    "byActivity": {
      "games": 7200,
      "create": 6000,
      "social": 3600,
      "other": 1200
    },
    "peakHours": [
      { hour: 16, count: 5 },
      { hour: 19, count: 8 }
    ]
  }
}
```

#### è·å–åˆ›ä½œä½œå“åˆ—è¡¨
```typescript
GET /api/parents/children/{childId}/works
Headers: Authorization: Bearer {parentToken}
Query: ?type=all&page=1&limit=20
Response:
{
  "success": true,
  "data": {
    "total": 45,
    "works": [
      {
        "id": 1,
        "type": "story",
        "title": "å°å…”å­çš„å†’é™©",
        "thumbnail": "...",
        "content": "...",
        "likes": 10,
        "published": true,
        "createdAt": "2026-01-10T14:20:00Z"
      }
    ]
  }
}
```

#### è·å–å¿ƒçµèŠ±å›­æ—¥è®°
```typescript
GET /api/parents/children/{childId}/diaries
Headers: Authorization: Bearer {parentToken}
Query: ?startDate=2026-01-01&endDate=2026-01-11
Response:
{
  "success": true,
  "data": [
    {
      "id": 1,
      "mood": "happy",
      "content": "ä»Šå¤©å¾ˆå¼€å¿ƒï¼Œå®Œæˆäº†ä¸€ä¸ªæ•…äº‹åˆ›ä½œ",
      "aiResponse": "...",
      "createdAt": "2026-01-10T20:00:00Z"
    }
  ]
}
```

### 4. å­¦ä¹ æŠ¥å‘Šæ¨¡å—

#### è·å–æ¯å‘¨æŠ¥å‘Š
```typescript
GET /api/parents/children/{childId}/reports/weekly
Headers: Authorization: Bearer {parentToken}
Query: ?weekStart=2026-01-05
Response:
{
  "success": true,
  "data": {
    "period": { start: "2026-01-05", end: "2026-01-11" },
    "summary": {
      "totalUsage": 18000,
      "avgDaily": 2571,
      "worksCreated": 5,
      "gamesPlayed": 12,
      "achievements": 2
    },
    "highlights": [
      "æœ¬å‘¨å®Œæˆäº†5ä¸ªåˆ›ä½œä½œå“",
      "è§£é”äº†'åˆ›ä½œè¾¾äºº'æˆå°±",
      "æ¸¸æˆå¹³å‡å¾—åˆ†æå‡20%"
    ],
    "recommendations": [
      "å»ºè®®é€‚å½“æ§åˆ¶æ¸¸æˆæ—¶é—´",
      "é¼“åŠ±å¤šå°è¯•è¯—è¯åˆ›ä½œ"
    ],
    "comparison": {
      "vsLastWeek": {
        "usage": "+15%",
        "works": "+2",
        "games": "-3"
      }
    }
  }
}
```

#### å¯¼å‡ºæŠ¥å‘Šä¸ºPDF
```typescript
GET /api/parents/children/{childId}/reports/export
Headers: Authorization: Bearer {parentToken}
Query: ?type=weekly&date=2026-01-11&format=pdf
Response: PDFæ–‡ä»¶æµ
```

### 5. å®¶é•¿æ§åˆ¶æ¨¡å—

#### è·å–æ§åˆ¶è®¾ç½®
```typescript
GET /api/parents/children/{childId}/controls
Headers: Authorization: Bearer {parentToken}
Response:
{
  "success": true,
  "data": {
    "dailyTimeLimit": 7200,
    "allowedTimeRanges": [
      { "start": "08:00", "end": "12:00" },
      { "start": "14:00", "end": "20:00" }
    ],
    "blockedFeatures": [],
    "contentFilterLevel": "medium",
    "emergencyLock": false
  }
}
```

#### æ›´æ–°æ§åˆ¶è®¾ç½®
```typescript
PUT /api/parents/children/{childId}/controls
Headers: Authorization: Bearer {parentToken}
Request:
{
  "dailyTimeLimit": 5400, // 1.5å°æ—¶
  "allowedTimeRanges": [
    { "start": "08:00", "end": "20:00" }
  ],
  "blockedFeatures": ["social"],
  "contentFilterLevel": "high"
}
Response:
{
  "success": true,
  "message": "è®¾ç½®å·²æ›´æ–°"
}
```

#### ç´§æ€¥é”å®š
```typescript
POST /api/parents/children/{childId}/emergency-lock
Headers: Authorization: Bearer {parentToken}
Request:
{
  "lock": true,
  "reason": "è¯¥ç¡è§‰äº†"
}
Response:
{
  "success": true,
  "message": "å·²é”å®šï¼Œå­©å­å°†åœ¨5åˆ†é’Ÿåè¢«å¼ºåˆ¶é€€å‡º"
}
```

### 6. é€šçŸ¥æ¨¡å—

#### è·å–é€šçŸ¥åˆ—è¡¨
```typescript
GET /api/parents/notifications
Headers: Authorization: Bearer {parentToken}
Query: ?page=1&limit=20&read=false
Response:
{
  "success": true,
  "data": {
    "total": 15,
    "unread": 3,
    "notifications": [
      {
        "id": 1,
        "type": "alert",
        "title": "ä½¿ç”¨æ—¶é•¿æé†’",
        "content": "å°æ˜ä»Šæ—¥ä½¿ç”¨æ—¶é•¿å·²è¾¾2å°æ—¶",
        "childName": "å°æ˜",
        "read": false,
        "createdAt": "2026-01-11T16:00:00Z"
      }
    ]
  }
}
```

#### æ ‡è®°å·²è¯»
```typescript
PUT /api/parents/notifications/{notificationId}/read
Headers: Authorization: Bearer {parentToken}
Response:
{
  "success": true
}
```

---

## ğŸ’» å‰ç«¯é¡µé¢è®¾è®¡

### é¡µé¢ç»“æ„

```
/parent (å®¶é•¿ç«¯æ ¹è·¯å¾„)
â”œâ”€â”€ /login              # å®¶é•¿ç™»å½•é¡µ
â”œâ”€â”€ /register           # å®¶é•¿æ³¨å†Œé¡µ
â”œâ”€â”€ /dashboard          # æ§åˆ¶å°é¦–é¡µ
â”œâ”€â”€ /children           # å­©å­ç®¡ç†
â”‚   â”œâ”€â”€ /add           # ç»‘å®šæ–°å­©å­
â”‚   â””â”€â”€ /{id}          # å•ä¸ªå­©å­è¯¦æƒ…
â”‚       â”œâ”€â”€ /overview  # æ¦‚è§ˆï¼ˆé»˜è®¤ï¼‰
â”‚       â”œâ”€â”€ /works     # ä½œå“æŸ¥çœ‹
â”‚       â”œâ”€â”€ /diaries   # æ—¥è®°æŸ¥çœ‹
â”‚       â”œâ”€â”€ /reports   # å­¦ä¹ æŠ¥å‘Š
â”‚       â”œâ”€â”€ /controls  # ä½¿ç”¨ç®¡æ§
â”‚       â””â”€â”€ /social    # ç¤¾äº¤æƒ…å†µ
â”œâ”€â”€ /notifications      # é€šçŸ¥ä¸­å¿ƒ
â””â”€â”€ /settings          # è®¾ç½®ä¸­å¿ƒ
```

### å…³é”®é¡µé¢è®¾è®¡

#### 1. å®¶é•¿ç™»å½•é¡µ (/parent/login)

```tsx
// app/src/pages/parent/Login.tsx
import { useState } from 'react'
import { useNavigate } from 'react-router-dom'
import { parentAuthApi } from '../../services/api'
import './ParentLogin.css'

export default function ParentLogin() {
  const navigate = useNavigate()
  const [phone, setPhone] = useState('')
  const [password, setPassword] = useState('')
  const [loading, setLoading] = useState(false)

  const handleLogin = async (e: React.FormEvent) => {
    e.preventDefault()
    setLoading(true)

    try {
      const response = await parentAuthApi.login({ phone, password })
      if (response.success) {
        localStorage.setItem('parentToken', response.data.accessToken)
        localStorage.setItem('parentProfile', JSON.stringify(response.data.parent))
        navigate('/parent/dashboard')
      }
    } catch (error) {
      alert('ç™»å½•å¤±è´¥ï¼š' + error.message)
    } finally {
      setLoading(false)
    }
  }

  return (
    <div className="parent-login-page">
      <div className="login-container">
        <div className="login-header">
          <div className="logo">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</div>
          <h1>å®¶é•¿ç›‘æŠ¤ä¸­å¿ƒ</h1>
          <p>å®ˆæŠ¤å­©å­å¥åº·æˆé•¿</p>
        </div>

        <form className="login-form" onSubmit={handleLogin}>
          <div className="form-group">
            <label>æ‰‹æœºå·</label>
            <input
              type="tel"
              placeholder="è¯·è¾“å…¥æ‰‹æœºå·"
              value={phone}
              onChange={(e) => setPhone(e.target.value)}
              required
            />
          </div>

          <div className="form-group">
            <label>å¯†ç </label>
            <input
              type="password"
              placeholder="è¯·è¾“å…¥å¯†ç "
              value={password}
              onChange={(e) => setPassword(e.target.value)}
              required
            />
          </div>

          <button type="submit" className="btn-login" disabled={loading}>
            {loading ? 'ç™»å½•ä¸­...' : 'ç™»å½•'}
          </button>
        </form>

        <div className="login-footer">
          <span>è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ</span>
          <a onClick={() => navigate('/parent/register')}>ç«‹å³æ³¨å†Œ</a>
        </div>
      </div>
    </div>
  )
}
```

#### 2. æ§åˆ¶å°é¦–é¡µ (/parent/dashboard)

```tsx
// app/src/pages/parent/Dashboard.tsx
import { useEffect, useState } from 'react'
import { useNavigate } from 'react-router-dom'
import { parentApi } from '../../services/api'
import './Dashboard.css'

export default function ParentDashboard() {
  const navigate = useNavigate()
  const [children, setChildren] = useState([])
  const [notifications, setNotifications] = useState([])
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    loadDashboard()
  }, [])

  const loadDashboard = async () => {
    try {
      const [childrenRes, notifRes] = await Promise.all([
        parentApi.getChildren(),
        parentApi.getNotifications({ limit: 5 })
      ])

      setChildren(childrenRes.data)
      setNotifications(notifRes.data.notifications)
    } catch (error) {
      console.error('åŠ è½½å¤±è´¥', error)
    } finally {
      setLoading(false)
    }
  }

  if (loading) return <div>åŠ è½½ä¸­...</div>

  return (
    <div className="parent-dashboard">
      <header className="dashboard-header">
        <h1>å®¶é•¿ç›‘æŠ¤ä¸­å¿ƒ</h1>
        <div className="header-actions">
          <button className="btn-notifications">
            ğŸ””
            {notifications.filter(n => !n.read).length > 0 && (
              <span className="badge">{notifications.filter(n => !n.read).length}</span>
            )}
          </button>
        </div>
      </header>

      <div className="dashboard-content">
        {/* å­©å­å¡ç‰‡åˆ—è¡¨ */}
        <section className="children-section">
          <div className="section-header">
            <h2>æˆ‘çš„å­©å­</h2>
            <button
              className="btn-add-child"
              onClick={() => navigate('/parent/children/add')}
            >
              + ç»‘å®šå­©å­
            </button>
          </div>

          <div className="children-grid">
            {children.map(child => (
              <ChildCard
                key={child.id}
                child={child}
                onClick={() => navigate(`/parent/children/${child.id}`)}
              />
            ))}
          </div>
        </section>

        {/* ä»Šæ—¥é€šçŸ¥ */}
        <section className="notifications-section">
          <div className="section-header">
            <h2>æœ€æ–°é€šçŸ¥</h2>
            <a onClick={() => navigate('/parent/notifications')}>æŸ¥çœ‹å…¨éƒ¨</a>
          </div>

          <div className="notifications-list">
            {notifications.map(notif => (
              <NotificationItem key={notif.id} notification={notif} />
            ))}
          </div>
        </section>
      </div>
    </div>
  )
}

function ChildCard({ child, onClick }) {
  return (
    <div className="child-card" onClick={onClick}>
      <div className="child-avatar">{child.avatar || 'ğŸ‘¦'}</div>
      <div className="child-info">
        <div className="child-name">{child.nickname}</div>
        <div className="child-status">
          {child.isOnline ? (
            <span className="status-online">â— åœ¨çº¿</span>
          ) : (
            <span className="status-offline">â—‹ ç¦»çº¿</span>
          )}
        </div>
      </div>
      <div className="child-stats">
        <div className="stat-item">
          <div className="stat-value">{formatDuration(child.todayUsage)}</div>
          <div className="stat-label">ä»Šæ—¥ä½¿ç”¨</div>
        </div>
      </div>
    </div>
  )
}

function formatDuration(seconds: number): string {
  const hours = Math.floor(seconds / 3600)
  const minutes = Math.floor((seconds % 3600) / 60)
  return hours > 0 ? `${hours}h ${minutes}m` : `${minutes}m`
}
```

#### 3. å­©å­è¯¦æƒ…é¡µ (/parent/children/:id)

```tsx
// app/src/pages/parent/ChildDetail.tsx
import { useEffect, useState } from 'react'
import { useParams, Outlet, NavLink } from 'react-router-dom'
import { parentApi } from '../../services/api'
import './ChildDetail.css'

export default function ChildDetail() {
  const { id } = useParams()
  const [child, setChild] = useState(null)
  const [overview, setOverview] = useState(null)
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    loadChildDetail()
  }, [id])

  const loadChildDetail = async () => {
    try {
      const response = await parentApi.getChildOverview(id!)
      setChild(response.data.child)
      setOverview(response.data)
    } catch (error) {
      console.error('åŠ è½½å¤±è´¥', error)
    } finally {
      setLoading(false)
    }
  }

  if (loading) return <div>åŠ è½½ä¸­...</div>

  return (
    <div className="child-detail-page">
      {/* å¤´éƒ¨ä¿¡æ¯ */}
      <header className="child-header">
        <div className="child-profile">
          <div className="child-avatar-large">{child.avatar || 'ğŸ‘¦'}</div>
          <div className="child-basic-info">
            <h1>{child.nickname}</h1>
            <div className="child-meta">
              <span>{child.age}å²</span>
              <span>â€¢</span>
              <span>{overview.today.isOnline ? 'åœ¨çº¿' : 'ç¦»çº¿'}</span>
            </div>
          </div>
        </div>

        {/* ä»Šæ—¥æ¦‚è§ˆå¡ç‰‡ */}
        <div className="today-overview">
          <div className="overview-item">
            <div className="item-icon">â±ï¸</div>
            <div className="item-value">{formatDuration(overview.today.totalDuration)}</div>
            <div className="item-label">ä»Šæ—¥ä½¿ç”¨</div>
          </div>
          <div className="overview-item">
            <div className="item-icon">âœ¨</div>
            <div className="item-value">{overview.recentWorks.length}</div>
            <div className="item-label">ä»Šæ—¥åˆ›ä½œ</div>
          </div>
          <div className="overview-item">
            <div className="item-icon">âš ï¸</div>
            <div className="item-value">{overview.alerts.length}</div>
            <div className="item-label">å¾…å¤„ç†æé†’</div>
          </div>
        </div>
      </header>

      {/* å¯¼èˆªæ ‡ç­¾ */}
      <nav className="child-nav">
        <NavLink to="overview" className={({ isActive }) => isActive ? 'active' : ''}>
          æ¦‚è§ˆ
        </NavLink>
        <NavLink to="works">ä½œå“</NavLink>
        <NavLink to="diaries">æ—¥è®°</NavLink>
        <NavLink to="reports">æŠ¥å‘Š</NavLink>
        <NavLink to="controls">ç®¡æ§</NavLink>
        <NavLink to="social">ç¤¾äº¤</NavLink>
      </nav>

      {/* å­è·¯ç”±å†…å®¹ */}
      <div className="child-content">
        <Outlet context={{ child, overview }} />
      </div>
    </div>
  )
}
```

#### 4. ä½¿ç”¨ç®¡æ§é¡µé¢ (/parent/children/:id/controls)

```tsx
// app/src/pages/parent/Controls.tsx
import { useEffect, useState } from 'react'
import { useParams } from 'react-router-dom'
import { parentApi } from '../../services/api'
import './Controls.css'

export default function ParentalControls() {
  const { id } = useParams()
  const [controls, setControls] = useState(null)
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    loadControls()
  }, [id])

  const loadControls = async () => {
    try {
      const response = await parentApi.getControls(id!)
      setControls(response.data)
    } catch (error) {
      console.error('åŠ è½½å¤±è´¥', error)
    } finally {
      setLoading(false)
    }
  }

  const handleUpdateTimeLimit = async (newLimit: number) => {
    try {
      await parentApi.updateControls(id!, { dailyTimeLimit: newLimit })
      setControls({ ...controls, dailyTimeLimit: newLimit })
      alert('è®¾ç½®å·²æ›´æ–°')
    } catch (error) {
      alert('æ›´æ–°å¤±è´¥ï¼š' + error.message)
    }
  }

  const handleEmergencyLock = async () => {
    if (!confirm('ç¡®å®šè¦ç´§æ€¥é”å®šå—ï¼Ÿå­©å­å°†è¢«å¼ºåˆ¶é€€å‡ºåº”ç”¨')) return

    try {
      await parentApi.emergencyLock(id!, true)
      alert('å·²é”å®š')
    } catch (error) {
      alert('é”å®šå¤±è´¥ï¼š' + error.message)
    }
  }

  if (loading) return <div>åŠ è½½ä¸­...</div>

  return (
    <div className="parental-controls">
      {/* æ—¶é—´é™åˆ¶è®¾ç½® */}
      <section className="control-section">
        <h3>â±ï¸ ä½¿ç”¨æ—¶é•¿é™åˆ¶</h3>
        <div className="control-card">
          <div className="control-row">
            <span>æ¯æ—¥ä½¿ç”¨æ—¶é•¿ä¸Šé™</span>
            <select
              value={controls.dailyTimeLimit}
              onChange={(e) => handleUpdateTimeLimit(Number(e.target.value))}
            >
              <option value={3600}>1å°æ—¶</option>
              <option value={5400}>1.5å°æ—¶</option>
              <option value={7200}>2å°æ—¶</option>
              <option value={10800}>3å°æ—¶</option>
              <option value={-1}>ä¸é™åˆ¶</option>
            </select>
          </div>
        </div>
      </section>

      {/* å…è®¸æ—¶é—´æ®µ */}
      <section className="control-section">
        <h3>ğŸ• å…è®¸ä½¿ç”¨æ—¶é—´æ®µ</h3>
        <div className="control-card">
          {controls.allowedTimeRanges.map((range, index) => (
            <div key={index} className="time-range">
              <input type="time" value={range.start} />
              <span>-</span>
              <input type="time" value={range.end} />
              <button className="btn-remove">åˆ é™¤</button>
            </div>
          ))}
          <button className="btn-add-range">+ æ·»åŠ æ—¶é—´æ®µ</button>
        </div>
      </section>

      {/* åŠŸèƒ½ç¦ç”¨ */}
      <section className="control-section">
        <h3>ğŸš« åŠŸèƒ½ç¦ç”¨</h3>
        <div className="control-card">
          <label className="feature-toggle">
            <input
              type="checkbox"
              checked={controls.blockedFeatures.includes('games')}
            />
            <span>æ¸¸æˆåŠŸèƒ½</span>
          </label>
          <label className="feature-toggle">
            <input
              type="checkbox"
              checked={controls.blockedFeatures.includes('social')}
            />
            <span>ç¤¾äº¤åŠŸèƒ½</span>
          </label>
          <label className="feature-toggle">
            <input
              type="checkbox"
              checked={controls.blockedFeatures.includes('create')}
            />
            <span>åˆ›ä½œåŠŸèƒ½</span>
          </label>
        </div>
      </section>

      {/* å†…å®¹è¿‡æ»¤ */}
      <section className="control-section">
        <h3>ğŸ›¡ï¸ å†…å®¹è¿‡æ»¤çº§åˆ«</h3>
        <div className="control-card">
          <select value={controls.contentFilterLevel}>
            <option value="low">å®½æ¾</option>
            <option value="medium">ä¸­ç­‰</option>
            <option value="high">ä¸¥æ ¼</option>
          </select>
        </div>
      </section>

      {/* ç´§æ€¥é”å®š */}
      <section className="control-section">
        <h3>ğŸ”’ ç´§æ€¥æ“ä½œ</h3>
        <div className="control-card">
          <button className="btn-emergency-lock" onClick={handleEmergencyLock}>
            ç´§æ€¥é”å®š
          </button>
          <p className="help-text">
            ç‚¹å‡»åï¼Œå­©å­å°†åœ¨5åˆ†é’Ÿå†…è¢«å¼ºåˆ¶é€€å‡ºåº”ç”¨ï¼Œå¹¶æ— æ³•ç™»å½•
          </p>
        </div>
      </section>
    </div>
  )
}
```

---

## ğŸš€ å®æ–½æ­¥éª¤

### ç¬¬1å‘¨ï¼šæ•°æ®åº“å’Œåç«¯åŸºç¡€

#### Day 1-2: æ•°æ®åº“è®¾è®¡
- [ ] åˆ›å»ºè¿ç§»æ–‡ä»¶ `024_create_parent_system.ts`
- [ ] æ‰§è¡Œè¿ç§»ï¼Œåˆ›å»ºæ‰€æœ‰è¡¨
- [ ] ç¼–å†™ç§å­æ•°æ®ç”¨äºæµ‹è¯•
- [ ] æµ‹è¯•æ•°æ®åº“çº¦æŸå’Œç´¢å¼•

#### Day 3-4: å®¶é•¿è®¤è¯API
- [ ] å®ç°å®¶é•¿æ³¨å†Œæ¥å£
- [ ] å®ç°å®¶é•¿ç™»å½•æ¥å£
- [ ] JWT tokenç”Ÿæˆï¼ˆç‹¬ç«‹äºå„¿ç«¥ç«¯ï¼‰
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•

#### Day 5-7: ç»‘å®šç®¡ç†API
- [ ] å®ç°ç»‘å®šè¯·æ±‚æ¥å£
- [ ] å®ç°ç»‘å®šç¡®è®¤æ¥å£
- [ ] ç»‘å®šåˆ—è¡¨å’Œè§£ç»‘æ¥å£
- [ ] æµ‹è¯•ç»‘å®šæµç¨‹

### ç¬¬2å‘¨ï¼šæ ¸å¿ƒç›‘æ§åŠŸèƒ½

#### Day 1-3: ç›‘æ§APIå¼€å‘
- [ ] å­©å­æ¦‚è§ˆæ¥å£
- [ ] ä½¿ç”¨æ—¶é•¿ç»Ÿè®¡æ¥å£
- [ ] æ´»åŠ¨è®°å½•æ¥å£
- [ ] å®æ—¶çŠ¶æ€æ¨é€ï¼ˆWebSocketå¯é€‰ï¼‰

#### Day 4-5: å†…å®¹æŸ¥çœ‹API
- [ ] ä½œå“åˆ—è¡¨æ¥å£
- [ ] æ—¥è®°æŸ¥çœ‹æ¥å£
- [ ] ç¤¾äº¤æƒ…å†µæ¥å£

#### Day 6-7: å­¦ä¹ æŠ¥å‘ŠAPI
- [ ] æ¯æ—¥æ€»ç»“ç”Ÿæˆ
- [ ] æ¯å‘¨æŠ¥å‘Šç”Ÿæˆ
- [ ] PDFå¯¼å‡ºåŠŸèƒ½ï¼ˆä½¿ç”¨puppeteeræˆ–pdfkitï¼‰

### ç¬¬3å‘¨ï¼šå‰ç«¯é¡µé¢å¼€å‘

#### Day 1-2: åŸºç¡€é¡µé¢
- [ ] å®¶é•¿ç™»å½•é¡µ
- [ ] å®¶é•¿æ³¨å†Œé¡µ
- [ ] æ§åˆ¶å°é¦–é¡µ
- [ ] ç»Ÿä¸€çš„å®¶é•¿ç«¯Layout

#### Day 3-4: å­©å­ç®¡ç†é¡µé¢
- [ ] å­©å­åˆ—è¡¨
- [ ] ç»‘å®šæµç¨‹é¡µé¢
- [ ] å­©å­è¯¦æƒ…é¡µ
- [ ] æ¦‚è§ˆTab

#### Day 5-7: åŠŸèƒ½é¡µé¢
- [ ] ä½œå“æŸ¥çœ‹é¡µ
- [ ] æ—¥è®°æŸ¥çœ‹é¡µ
- [ ] å­¦ä¹ æŠ¥å‘Šé¡µ
- [ ] ä½¿ç”¨ç®¡æ§é¡µ

### ç¬¬4å‘¨ï¼šå®Œå–„å’Œæµ‹è¯•

#### Day 1-2: é€šçŸ¥ç³»ç»Ÿ
- [ ] é€šçŸ¥åˆ—è¡¨é¡µé¢
- [ ] æ¨é€é€šçŸ¥åŠŸèƒ½
- [ ] å¼‚å¸¸è¡Œä¸ºæ£€æµ‹

#### Day 3-4: æ ·å¼ä¼˜åŒ–
- [ ] ç»Ÿä¸€è§†è§‰è®¾è®¡
- [ ] å“åº”å¼é€‚é…
- [ ] åŠ¨ç”»å’Œäº¤äº’ä¼˜åŒ–

#### Day 5-7: æµ‹è¯•å’Œä¿®å¤
- [ ] åŠŸèƒ½æµ‹è¯•
- [ ] è¾¹ç•Œæƒ…å†µæµ‹è¯•
- [ ] Bugä¿®å¤
- [ ] æ€§èƒ½ä¼˜åŒ–

---

## ğŸ” å®‰å…¨è€ƒè™‘

### 1. è®¤è¯å’Œæˆæƒ

#### ç‹¬ç«‹çš„è®¤è¯ä½“ç³»
```typescript
// å®¶é•¿å’Œå„¿ç«¥ä½¿ç”¨ä¸åŒçš„token
const parentToken = jwt.sign(
  { id: parent.id, type: 'parent' },
  process.env.PARENT_JWT_SECRET,
  { expiresIn: '7d' }
)

// ä¸­é—´ä»¶éªŒè¯
function parentAuthMiddleware(req, res, next) {
  const token = req.headers.authorization?.replace('Bearer ', '')
  try {
    const decoded = jwt.verify(token, process.env.PARENT_JWT_SECRET)
    if (decoded.type !== 'parent') {
      return res.status(403).json({ error: 'æ— æƒè®¿é—®' })
    }
    req.parent = decoded
    next()
  } catch (error) {
    res.status(401).json({ error: 'è®¤è¯å¤±è´¥' })
  }
}
```

#### æƒé™æ£€æŸ¥
```typescript
// ç¡®ä¿å®¶é•¿åªèƒ½è®¿é—®è‡ªå·±ç»‘å®šçš„å­©å­
async function checkParentChildAccess(parentId: number, childId: number) {
  const binding = await pool.query(
    `SELECT * FROM parent_child_bindings
     WHERE parent_id = $1 AND child_id = $2 AND status = 'approved'`,
    [parentId, childId]
  )
  return binding.rows.length > 0
}
```

### 2. éšç§ä¿æŠ¤

#### æ•æ„Ÿæ•°æ®è„±æ•
```typescript
// å®¶é•¿æŸ¥çœ‹æ—¥è®°æ—¶ï¼Œè¿‡æ»¤æ•æ„Ÿä¿¡æ¯
function sanitizeDiary(diary: any) {
  return {
    ...diary,
    content: diary.content,
    // ä¸è¿”å›è¿‡äºç§å¯†çš„AIå¯¹è¯å†…å®¹
    aiResponse: diary.aiResponse ? 'ï¼ˆAIå›å¤å·²éšè—ï¼‰' : null
  }
}
```

#### å­©å­çŸ¥æƒ…æƒ
```typescript
// å­©å­å¯ä»¥æŸ¥çœ‹å®¶é•¿æŸ¥çœ‹è¿‡å“ªäº›å†…å®¹
CREATE TABLE parent_view_logs (
  id SERIAL PRIMARY KEY,
  parent_id INTEGER,
  child_id INTEGER,
  viewed_content_type VARCHAR(50),
  viewed_content_id INTEGER,
  viewed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### 3. é˜²æ»¥ç”¨æœºåˆ¶

#### é¢‘ç‡é™åˆ¶
```typescript
// é™åˆ¶ç»‘å®šè¯·æ±‚é¢‘ç‡
const bindingRequestLimiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15åˆ†é’Ÿ
  max: 5, // æœ€å¤š5æ¬¡
  message: 'ç»‘å®šè¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•'
})
```

#### æ“ä½œæ—¥å¿—
```typescript
CREATE TABLE parent_operation_logs (
  id SERIAL PRIMARY KEY,
  parent_id INTEGER,
  child_id INTEGER,
  operation VARCHAR(100),
  details JSONB,
  ip_address VARCHAR(50),
  user_agent TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

---

## ğŸ“± é¢å¤–è€ƒè™‘

### 1. ç§»åŠ¨ç«¯APP
å¦‚æœéœ€è¦ç‹¬ç«‹çš„å®¶é•¿ç«¯APPï¼š
- å¯ä»¥ä½¿ç”¨React Nativeå¤ç”¨å‰ç«¯ä»£ç 
- æˆ–ä½¿ç”¨Capacitorå°†Webåº”ç”¨æ‰“åŒ…ä¸ºåŸç”ŸAPP
- æ¨é€é€šçŸ¥ä½¿ç”¨Firebase Cloud Messaging

### 2. å¤šå­©å­ç®¡ç†
```sql
-- å·²ç»æ”¯æŒï¼Œä¸€ä¸ªå®¶é•¿å¯ä»¥ç»‘å®šå¤šä¸ªå­©å­
SELECT * FROM parent_child_bindings WHERE parent_id = 1;
```

### 3. å¤šå®¶é•¿å…±ç®¡
```sql
-- å·²ç»æ”¯æŒï¼Œä¸€ä¸ªå­©å­å¯ä»¥è¢«å¤šä¸ªå®¶é•¿ç»‘å®š
SELECT * FROM parent_child_bindings WHERE child_id = 10;
```

### 4. å­©å­ç«¯é…åˆæ”¹åŠ¨

#### æ·»åŠ ç»‘å®šç¡®è®¤å…¥å£
```tsx
// app/src/pages/Profile.tsx æ·»åŠ 
<div className="setting-item" onClick={() => navigate('/parent-binding')}>
  <span>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ å®¶é•¿ç›‘æŠ¤</span>
  <span className="arrow">â†’</span>
</div>
```

#### ç»‘å®šç¡®è®¤é¡µé¢
```tsx
// app/src/pages/ParentBinding.tsx
export default function ParentBinding() {
  const [code, setCode] = useState('')

  const handleConfirm = async () => {
    const response = await api.confirmParentBinding(code)
    if (response.success) {
      alert(`å·²ç»‘å®šå®¶é•¿ï¼š${response.data.parent.name}`)
    }
  }

  return (
    <div className="parent-binding-page">
      <h2>ç¡®è®¤å®¶é•¿ç»‘å®š</h2>
      <input
        placeholder="è¾“å…¥6ä½éªŒè¯ç "
        value={code}
        onChange={(e) => setCode(e.target.value)}
        maxLength={6}
      />
      <button onClick={handleConfirm}>ç¡®è®¤ç»‘å®š</button>
    </div>
  )
}
```

---

## ğŸ¯ æ€»ç»“

### æ ¸å¿ƒäº¤ä»˜ç‰©

1. âœ… **æ•°æ®åº“è¡¨** (7å¼ æ–°è¡¨)
   - parents, parent_child_bindings, usage_logs
   - parental_controls, behavior_alerts, parent_notifications

2. âœ… **åç«¯API** (30+æ¥å£)
   - å®¶é•¿è®¤è¯ (æ³¨å†Œ/ç™»å½•)
   - ç»‘å®šç®¡ç† (è¯·æ±‚/ç¡®è®¤/è§£ç»‘)
   - ç›‘æ§æŸ¥çœ‹ (æ¦‚è§ˆ/æ—¶é•¿/ä½œå“/æ—¥è®°)
   - å­¦ä¹ æŠ¥å‘Š (æ—¥/å‘¨/æœˆæŠ¥å‘Š)
   - ä½¿ç”¨ç®¡æ§ (æ—¶é—´é™åˆ¶/åŠŸèƒ½ç¦ç”¨/ç´§æ€¥é”å®š)
   - é€šçŸ¥ç³»ç»Ÿ

3. âœ… **å‰ç«¯é¡µé¢** (10+é¡µé¢)
   - ç™»å½•æ³¨å†Œ
   - æ§åˆ¶å°é¦–é¡µ
   - å­©å­ç®¡ç†
   - è¯¦æƒ…é¡µï¼ˆ6ä¸ªTabï¼‰
   - é€šçŸ¥ä¸­å¿ƒ

### é¢„æœŸæ•ˆæœ

- ğŸ¯ å®¶é•¿å¯ä»¥å…¨é¢äº†è§£å­©å­ä½¿ç”¨æƒ…å†µ
- ğŸ”’ å®¶é•¿å¯ä»¥æœ‰æ•ˆç®¡æ§å­©å­ä½¿ç”¨è¡Œä¸º
- ğŸ“Š å®šæœŸæ¨é€å­¦ä¹ æŠ¥å‘Šï¼Œä¿ƒè¿›æ²Ÿé€š
- âš ï¸ å¼‚å¸¸è¡Œä¸ºåŠæ—¶æé†’ï¼Œä¿éšœå®‰å…¨

### é¢„è®¡å·¥ä½œé‡

- **å¼€å‘æ—¶é—´**: 3-4å‘¨ï¼ˆ1äººå…¨èŒï¼‰
- **ä»£ç é‡ä¼°è®¡**:
  - åç«¯: ~3000è¡Œ
  - å‰ç«¯: ~4000è¡Œ
  - æ•°æ®åº“è¿ç§»: ~500è¡Œ

---

**æ–‡æ¡£ä½œè€…**: Claude Code AI
**ç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¥æœŸ**: 2026-01-11
