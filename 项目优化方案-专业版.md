# å¯è’™ä¹‹å…‰ - é¡¹ç›®ä¼˜åŒ–æ–¹æ¡ˆï¼ˆä¸“ä¸šç‰ˆï¼‰

## ğŸ“Š é¡¹ç›®ç°çŠ¶åˆ†æ

### å½“å‰æŠ€æœ¯æ ˆ
- **å‰ç«¯**: React 19.2.0 + TypeScript + Vite
- **è·¯ç”±**: React Router DOM 7.9.6
- **åç«¯**: Node.js + Express + PostgreSQL
- **ä¾èµ–å¤§å°**: 107MB

### å·²å®Œæˆçš„ä¼˜åŒ–
âœ… æ¸¸æˆç•Œé¢æ¸©é¦¨é£æ ¼æ”¹é€ 
âœ… åŠŸèƒ½æ¨¡å—åŒ–æ•´åˆï¼ˆå­¦ä¹ åœ°å›¾ã€ç»˜æœ¬ã€AIç™¾ç§‘ï¼‰
âœ… è¾¹ç•Œæº¢å‡ºé—®é¢˜ä¿®å¤
âœ… å“åº”å¼å¸ƒå±€ä¼˜åŒ–

---

## ğŸ¯ ä¼˜åŒ–ç›®æ ‡

### çŸ­æœŸç›®æ ‡ï¼ˆ1-2å‘¨ï¼‰
- ğŸš€ æ€§èƒ½ä¼˜åŒ–ï¼šé¦–å±åŠ è½½æ—¶é—´ < 2ç§’
- ğŸ’ ä»£ç è´¨é‡ï¼šå‡å°‘é‡å¤ä»£ç  30%
- ğŸ¨ ç”¨æˆ·ä½“éªŒï¼šäº¤äº’å“åº”æ—¶é—´ < 100ms
- ğŸ“¦ æ‰“åŒ…ä¼˜åŒ–ï¼šæ„å»ºä½“ç§¯å‡å°‘ 20%

### ä¸­æœŸç›®æ ‡ï¼ˆ3-4å‘¨ï¼‰
- âš¡ æ•´ä½“æ€§èƒ½æå‡ 50%
- ğŸ§ª æµ‹è¯•è¦†ç›–ç‡è¾¾åˆ° 60%
- ğŸ“± ç§»åŠ¨ç«¯ä½“éªŒä¼˜åŒ–
- ğŸ”’ å®‰å…¨æ€§åŠ å›º

---

## ğŸ” ä¸€ã€æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ

### 1.1 ä»£ç åˆ†å‰²ä¸æ‡’åŠ è½½

#### é—®é¢˜è¯Šæ–­
å½“å‰æ‰€æœ‰é¡µé¢ç»„ä»¶éƒ½åŒæ­¥åŠ è½½ï¼Œé¦–æ¬¡åŠ è½½åŒ…å«å¤§é‡æœªä½¿ç”¨ä»£ç ã€‚

#### ä¼˜åŒ–æ–¹æ¡ˆ

**A. è·¯ç”±çº§åˆ«çš„ä»£ç åˆ†å‰²**
```typescript
// app/src/App.tsx ä¼˜åŒ–å‰
import Home from './pages/Home'
import Games from './pages/Games'
import Profile from './pages/Profile'
// ... 20+ é¡µé¢ç»„ä»¶

// ä¼˜åŒ–å - ä½¿ç”¨ React.lazy
import { lazy, Suspense } from 'react'

const Home = lazy(() => import('./pages/Home'))
const Games = lazy(() => import('./pages/Games'))
const Profile = lazy(() => import('./pages/Profile'))
const PictureBook = lazy(() => import('./pages/PictureBook'))
const AIEncyclopedia = lazy(() => import('./pages/AIEncyclopedia'))
const LearningMap = lazy(() => import('./pages/LearningMap'))
// ... å…¶ä»–é¡µé¢

// è·¯ç”±é…ç½®
<Suspense fallback={<Loading />}>
  <Routes>
    <Route path="/" element={<Home />} />
    <Route path="/games" element={<Games />} />
    {/* ... */}
  </Routes>
</Suspense>
```

**é¢„æœŸæ•ˆæœ**:
- âœ… é¦–å±åŠ è½½æ—¶é—´å‡å°‘ 40-50%
- âœ… åˆå§‹ JS åŒ…å¤§å°å‡å°‘ 60%
- âœ… æŒ‰éœ€åŠ è½½ï¼Œæå‡ç”¨æˆ·ä½“éªŒ

**B. ç»„ä»¶çº§åˆ«çš„æ‡’åŠ è½½**
```typescript
// é‡é‡çº§ç»„ä»¶å»¶è¿ŸåŠ è½½
const HeavyComponent = lazy(() => import('./components/HeavyComponent'))
const VideoPlayer = lazy(() => import('./components/VideoPlayer'))
const CodeEditor = lazy(() => import('./components/CodeEditor'))
```

**å®æ–½ä¼˜å…ˆçº§**: ğŸ”´ é«˜ï¼ˆç«‹å³å®æ–½ï¼‰

---

### 1.2 å›¾ç‰‡èµ„æºä¼˜åŒ–

#### é—®é¢˜è¯Šæ–­
- å›¾ç‰‡æ ¼å¼æœªä¼˜åŒ–ï¼ˆä½¿ç”¨ PNG ä»£æ›¿ WebPï¼‰
- ç¼ºå°‘æ‡’åŠ è½½å’Œå ä½ç¬¦
- æ²¡æœ‰å“åº”å¼å›¾ç‰‡ç­–ç•¥

#### ä¼˜åŒ–æ–¹æ¡ˆ

**A. å›¾ç‰‡æ ¼å¼ä¼˜åŒ–**
```typescript
// åˆ›å»ºå›¾ç‰‡ä¼˜åŒ–ç»„ä»¶
// app/src/components/OptimizedImage.tsx
interface OptimizedImageProps {
  src: string
  alt: string
  width?: number
  height?: number
  lazy?: boolean
}

export const OptimizedImage: React.FC<OptimizedImageProps> = ({
  src,
  alt,
  width,
  height,
  lazy = true
}) => {
  const [loaded, setLoaded] = useState(false)

  return (
    <div className="optimized-image-container">
      {!loaded && <div className="image-placeholder" />}
      <img
        src={src}
        alt={alt}
        width={width}
        height={height}
        loading={lazy ? 'lazy' : 'eager'}
        onLoad={() => setLoaded(true)}
        style={{ opacity: loaded ? 1 : 0 }}
      />
    </div>
  )
}
```

**B. å›¾ç‰‡å‹ç¼©å’Œè½¬æ¢**
```bash
# å®‰è£…å›¾ç‰‡ä¼˜åŒ–å·¥å…·
npm install -D vite-plugin-imagemin

# vite.config.ts
import viteImagemin from 'vite-plugin-imagemin'

export default defineConfig({
  plugins: [
    viteImagemin({
      gifsicle: { optimizationLevel: 7 },
      optipng: { optimizationLevel: 7 },
      mozjpeg: { quality: 80 },
      webp: { quality: 80 }
    })
  ]
})
```

**é¢„æœŸæ•ˆæœ**:
- âœ… å›¾ç‰‡ä½“ç§¯å‡å°‘ 50-70%
- âœ… é¡µé¢åŠ è½½é€Ÿåº¦æå‡ 30%
- âœ… ç§»åŠ¨ç«¯æµé‡èŠ‚çœ

**å®æ–½ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­ï¼ˆ1å‘¨å†…å®Œæˆï¼‰

---

### 1.3 çŠ¶æ€ç®¡ç†ä¼˜åŒ–

#### é—®é¢˜è¯Šæ–­
- ç»„ä»¶é‡å¤è¯·æ±‚ç›¸åŒæ•°æ®
- ç¼ºå°‘å…¨å±€çŠ¶æ€ç®¡ç†
- æ•°æ®ç¼“å­˜ç­–ç•¥ä¸å®Œå–„

#### ä¼˜åŒ–æ–¹æ¡ˆ

**A. å¼•å…¥è½»é‡çº§çŠ¶æ€ç®¡ç†**
```bash
# å®‰è£… Zustandï¼ˆæ¯” Redux æ›´è½»é‡ï¼‰
npm install zustand
```

```typescript
// app/src/store/useUserStore.ts
import create from 'zustand'
import { persist } from 'zustand/middleware'

interface UserState {
  user: User | null
  profile: UserProfile | null
  setUser: (user: User) => void
  setProfile: (profile: UserProfile) => void
  logout: () => void
}

export const useUserStore = create<UserState>()(
  persist(
    (set) => ({
      user: null,
      profile: null,
      setUser: (user) => set({ user }),
      setProfile: (profile) => set({ profile }),
      logout: () => set({ user: null, profile: null })
    }),
    {
      name: 'user-storage'
    }
  )
)
```

**B. API è¯·æ±‚ç¼“å­˜**
```typescript
// app/src/hooks/useAPICache.ts
import { useState, useEffect } from 'react'

const cache = new Map()

export function useAPICache<T>(key: string, fetcher: () => Promise<T>) {
  const [data, setData] = useState<T | null>(null)
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    if (cache.has(key)) {
      setData(cache.get(key))
      setLoading(false)
      return
    }

    fetcher().then((result) => {
      cache.set(key, result)
      setData(result)
      setLoading(false)
    })
  }, [key])

  return { data, loading }
}
```

**é¢„æœŸæ•ˆæœ**:
- âœ… å‡å°‘ 50% çš„é‡å¤è¯·æ±‚
- âœ… æå‡æ•°æ®è®¿é—®é€Ÿåº¦
- âœ… é™ä½æœåŠ¡å™¨å‹åŠ›

**å®æ–½ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­ï¼ˆ2å‘¨å†…å®Œæˆï¼‰

---

### 1.4 æ‰“åŒ…ä½“ç§¯ä¼˜åŒ–

#### é—®é¢˜è¯Šæ–­
- æœªè¿›è¡Œä¾èµ–åˆ†æ
- å¯èƒ½å­˜åœ¨é‡å¤ä¾èµ–
- ç¼ºå°‘ Tree Shaking ä¼˜åŒ–

#### ä¼˜åŒ–æ–¹æ¡ˆ

**A. ä¾èµ–åˆ†æ**
```bash
# å®‰è£…åˆ†æå·¥å…·
npm install -D rollup-plugin-visualizer

# vite.config.ts
import { visualizer } from 'rollup-plugin-visualizer'

export default defineConfig({
  plugins: [
    visualizer({
      open: true,
      gzipSize: true,
      brotliSize: true
    })
  ]
})
```

**B. ä¼˜åŒ–å¯¼å…¥æ–¹å¼**
```typescript
// âŒ é”™è¯¯ï¼šå¯¼å…¥æ•´ä¸ªåº“
import _ from 'lodash'

// âœ… æ­£ç¡®ï¼šæŒ‰éœ€å¯¼å…¥
import debounce from 'lodash/debounce'
import throttle from 'lodash/throttle'

// âŒ é”™è¯¯ï¼šå¯¼å…¥æ‰€æœ‰å›¾æ ‡
import * as Icons from 'react-icons/fa'

// âœ… æ­£ç¡®ï¼šæŒ‰éœ€å¯¼å…¥
import { FaHome, FaUser } from 'react-icons/fa'
```

**C. å¼€å¯ Gzip å‹ç¼©**
```bash
npm install -D vite-plugin-compression
```

```typescript
// vite.config.ts
import viteCompression from 'vite-plugin-compression'

export default defineConfig({
  plugins: [
    viteCompression({
      algorithm: 'gzip',
      ext: '.gz'
    })
  ]
})
```

**é¢„æœŸæ•ˆæœ**:
- âœ… æ‰“åŒ…ä½“ç§¯å‡å°‘ 30-40%
- âœ… åŠ è½½é€Ÿåº¦æå‡ 25%
- âœ… æœåŠ¡å™¨å¸¦å®½èŠ‚çœ

**å®æ–½ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­ï¼ˆ1å‘¨å†…å®Œæˆï¼‰

---

## ğŸ¨ äºŒã€UI/UX ä¼˜åŒ–æ–¹æ¡ˆ

### 2.1 åŠ è½½çŠ¶æ€ä¼˜åŒ–

#### é—®é¢˜è¯Šæ–­
- é¡µé¢åˆ‡æ¢æ—¶ç™½å±
- ç¼ºå°‘åŠ è½½åŠ¨ç”»
- ç”¨æˆ·ä¸çŸ¥é“è¿›åº¦

#### ä¼˜åŒ–æ–¹æ¡ˆ

**A. éª¨æ¶å±ç»„ä»¶**
```typescript
// app/src/components/common/Skeleton.tsx
export const Skeleton: React.FC<{ variant?: 'text' | 'card' | 'circle' }> = ({
  variant = 'text'
}) => {
  return (
    <div className={`skeleton skeleton-${variant}`}>
      <div className="skeleton-shimmer" />
    </div>
  )
}
```

```css
/* Skeleton.css */
.skeleton {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: 8px;
}

@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

.skeleton-text { height: 16px; width: 100%; }
.skeleton-card { height: 200px; width: 100%; }
.skeleton-circle { height: 48px; width: 48px; border-radius: 50%; }
```

**B. é¡µé¢è¿‡æ¸¡åŠ¨ç”»**
```typescript
// app/src/components/PageTransition.tsx
import { motion } from 'framer-motion'

export const PageTransition: React.FC<{ children: React.ReactNode }> = ({
  children
}) => {
  return (
    <motion.div
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      exit={{ opacity: 0, y: -20 }}
      transition={{ duration: 0.3 }}
    >
      {children}
    </motion.div>
  )
}
```

**é¢„æœŸæ•ˆæœ**:
- âœ… æå‡ç”¨æˆ·æ„ŸçŸ¥é€Ÿåº¦
- âœ… å‡å°‘ç™½å±æ—¶é—´
- âœ… æ›´æµç•…çš„è¿‡æ¸¡æ•ˆæœ

**å®æ–½ä¼˜å…ˆçº§**: ğŸ”´ é«˜ï¼ˆç«‹å³å®æ–½ï¼‰

---

### 2.2 äº¤äº’åé¦ˆä¼˜åŒ–

#### é—®é¢˜è¯Šæ–­
- æŒ‰é’®ç‚¹å‡»æ— åé¦ˆ
- è¡¨å•æäº¤æ— è¿›åº¦æç¤º
- é”™è¯¯æç¤ºä¸å‹å¥½

#### ä¼˜åŒ–æ–¹æ¡ˆ

**A. è§¦è§‰åé¦ˆï¼ˆç§»åŠ¨ç«¯ï¼‰**
```typescript
// app/src/utils/haptics.ts
export const hapticFeedback = (type: 'light' | 'medium' | 'heavy' = 'light') => {
  if ('vibrate' in navigator) {
    const patterns = {
      light: 10,
      medium: 20,
      heavy: 50
    }
    navigator.vibrate(patterns[type])
  }
}
```

**B. åŠ è½½æŒ‰é’®ç»„ä»¶**
```typescript
// app/src/components/common/LoadingButton.tsx
interface LoadingButtonProps {
  loading: boolean
  onClick: () => void
  children: React.ReactNode
}

export const LoadingButton: React.FC<LoadingButtonProps> = ({
  loading,
  onClick,
  children
}) => {
  return (
    <button
      onClick={onClick}
      disabled={loading}
      className="loading-button"
    >
      {loading ? (
        <span className="spinner" />
      ) : (
        children
      )}
    </button>
  )
}
```

**C. Toast é€šçŸ¥å¢å¼º**
```typescript
// å·²æœ‰ Toast ç»„ä»¶ï¼Œå¢å¼ºåŠŸèƒ½
export const useToast = () => {
  const show = (message: string, type: 'success' | 'error' | 'info') => {
    // æ·»åŠ å›¾æ ‡
    const icons = {
      success: 'âœ…',
      error: 'âŒ',
      info: 'â„¹ï¸'
    }

    // æ·»åŠ è§¦è§‰åé¦ˆ
    if (type === 'success') hapticFeedback('light')
    if (type === 'error') hapticFeedback('heavy')

    // æ˜¾ç¤ºæ¶ˆæ¯
    showToast(`${icons[type]} ${message}`)
  }

  return { show }
}
```

**é¢„æœŸæ•ˆæœ**:
- âœ… æå‡ç”¨æˆ·æ“ä½œç¡®è®¤æ„Ÿ
- âœ… æ›´å‹å¥½çš„é”™è¯¯æç¤º
- âœ… ç§»åŠ¨ç«¯ä½“éªŒæå‡

**å®æ–½ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­ï¼ˆ1å‘¨å†…å®Œæˆï¼‰

---

### 2.3 å¯è®¿é—®æ€§ä¼˜åŒ–

#### é—®é¢˜è¯Šæ–­
- ç¼ºå°‘é”®ç›˜å¯¼èˆªæ”¯æŒ
- é¢œè‰²å¯¹æ¯”åº¦ä¸è¶³
- æ— éšœç¢æ ‡ç­¾ç¼ºå¤±

#### ä¼˜åŒ–æ–¹æ¡ˆ

**A. é”®ç›˜å¯¼èˆª**
```typescript
// ä¸ºæ‰€æœ‰äº¤äº’å…ƒç´ æ·»åŠ  tabIndex
<button tabIndex={0} aria-label="å¼€å§‹æ¸¸æˆ">
  å¼€å§‹æ¸¸æˆ
</button>

// æ·»åŠ å¿«æ·é”®æ”¯æŒ
useEffect(() => {
  const handleKeyPress = (e: KeyboardEvent) => {
    if (e.key === 'Escape') closeModal()
    if (e.key === '/') focusSearch()
  }

  window.addEventListener('keydown', handleKeyPress)
  return () => window.removeEventListener('keydown', handleKeyPress)
}, [])
```

**B. ARIA æ ‡ç­¾**
```typescript
// ä¸ºå¤æ‚ç»„ä»¶æ·»åŠ è¯­ä¹‰åŒ–æ ‡ç­¾
<nav aria-label="ä¸»å¯¼èˆª">
  <ul role="menu">
    <li role="menuitem">é¦–é¡µ</li>
    <li role="menuitem">æ¸¸æˆ</li>
  </ul>
</nav>

<section aria-labelledby="games-title">
  <h2 id="games-title">æ¸¸æˆåˆ—è¡¨</h2>
  {/* ... */}
</section>
```

**é¢„æœŸæ•ˆæœ**:
- âœ… æå‡æ— éšœç¢è®¿é—®æ€§
- âœ… æ”¯æŒå±å¹•é˜…è¯»å™¨
- âœ… æ›´å¥½çš„é”®ç›˜æ“ä½œä½“éªŒ

**å®æ–½ä¼˜å…ˆçº§**: ğŸŸ¢ ä½ï¼ˆæœ‰æ—¶é—´å†åšï¼‰

---

## ğŸ§ª ä¸‰ã€ä»£ç è´¨é‡ä¼˜åŒ–

### 3.1 ç»„ä»¶å¤ç”¨ä¸æŠ½è±¡

#### é—®é¢˜è¯Šæ–­
- å¤šä¸ªé¡µé¢å­˜åœ¨é‡å¤ä»£ç 
- ç»„ä»¶è€¦åˆåº¦é«˜
- ç¼ºå°‘é€šç”¨ç»„ä»¶åº“

#### ä¼˜åŒ–æ–¹æ¡ˆ

**A. åˆ›å»ºé€šç”¨ç»„ä»¶åº“**
```typescript
// app/src/components/common/Card.tsx
interface CardProps {
  title?: string
  icon?: string
  onClick?: () => void
  children: React.ReactNode
  variant?: 'default' | 'highlight' | 'outlined'
}

export const Card: React.FC<CardProps> = ({
  title,
  icon,
  onClick,
  children,
  variant = 'default'
}) => {
  return (
    <div className={`card card-${variant}`} onClick={onClick}>
      {(title || icon) && (
        <div className="card-header">
          {icon && <span className="card-icon">{icon}</span>}
          {title && <h3 className="card-title">{title}</h3>}
        </div>
      )}
      <div className="card-content">{children}</div>
    </div>
  )
}
```

**B. è‡ªå®šä¹‰ Hooks æŠ½å–**
```typescript
// app/src/hooks/useFetch.ts
export function useFetch<T>(url: string) {
  const [data, setData] = useState<T | null>(null)
  const [loading, setLoading] = useState(true)
  const [error, setError] = useState<Error | null>(null)

  useEffect(() => {
    fetch(url)
      .then(res => res.json())
      .then(setData)
      .catch(setError)
      .finally(() => setLoading(false))
  }, [url])

  return { data, loading, error }
}

// app/src/hooks/useLocalStorage.ts
export function useLocalStorage<T>(key: string, initialValue: T) {
  const [value, setValue] = useState<T>(() => {
    const stored = localStorage.getItem(key)
    return stored ? JSON.parse(stored) : initialValue
  })

  useEffect(() => {
    localStorage.setItem(key, JSON.stringify(value))
  }, [key, value])

  return [value, setValue] as const
}
```

**é¢„æœŸæ•ˆæœ**:
- âœ… å‡å°‘ 30% é‡å¤ä»£ç 
- âœ… æå‡å¼€å‘æ•ˆç‡
- âœ… æ›´å®¹æ˜“ç»´æŠ¤

**å®æ–½ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­ï¼ˆ2å‘¨å†…å®Œæˆï¼‰

---

### 3.2 é”™è¯¯å¤„ç†ä¼˜åŒ–

#### é—®é¢˜è¯Šæ–­
- ç¼ºå°‘å…¨å±€é”™è¯¯æ•è·
- é”™è¯¯æç¤ºä¸å‹å¥½
- æœªè®°å½•é”™è¯¯æ—¥å¿—

#### ä¼˜åŒ–æ–¹æ¡ˆ

**A. é”™è¯¯è¾¹ç•Œç»„ä»¶**
```typescript
// app/src/components/ErrorBoundary.tsx
class ErrorBoundary extends React.Component<
  { children: React.ReactNode },
  { hasError: boolean; error: Error | null }
> {
  constructor(props: any) {
    super(props)
    this.state = { hasError: false, error: null }
  }

  static getDerivedStateFromError(error: Error) {
    return { hasError: true, error }
  }

  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {
    // è®°å½•é”™è¯¯åˆ°æ—¥å¿—æœåŠ¡
    console.error('Error caught by boundary:', error, errorInfo)
    // å¯ä»¥å‘é€åˆ°åç«¯æ—¥å¿—æœåŠ¡
  }

  render() {
    if (this.state.hasError) {
      return (
        <div className="error-fallback">
          <h2>å“å‘€ï¼Œå‡ºé”™äº†ï¼</h2>
          <p>æˆ‘ä»¬æ­£åœ¨ä¿®å¤è¿™ä¸ªé—®é¢˜</p>
          <button onClick={() => window.location.reload()}>
            åˆ·æ–°é¡µé¢
          </button>
        </div>
      )
    }

    return this.props.children
  }
}
```

**B. API é”™è¯¯ç»Ÿä¸€å¤„ç†**
```typescript
// app/src/utils/apiClient.ts
export const apiClient = {
  async request<T>(url: string, options?: RequestInit): Promise<T> {
    try {
      const response = await fetch(url, options)

      if (!response.ok) {
        throw new APIError(response.status, await response.text())
      }

      return await response.json()
    } catch (error) {
      if (error instanceof APIError) {
        // æ˜¾ç¤ºå‹å¥½é”™è¯¯æç¤º
        toast.error(getErrorMessage(error.status))
      } else {
        toast.error('ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ')
      }
      throw error
    }
  }
}

class APIError extends Error {
  constructor(public status: number, message: string) {
    super(message)
  }
}

function getErrorMessage(status: number): string {
  const messages: Record<number, string> = {
    400: 'è¯·æ±‚å‚æ•°é”™è¯¯',
    401: 'è¯·å…ˆç™»å½•',
    403: 'æ²¡æœ‰æƒé™',
    404: 'èµ„æºä¸å­˜åœ¨',
    500: 'æœåŠ¡å™¨é”™è¯¯ï¼Œè¯·ç¨åå†è¯•'
  }
  return messages[status] || 'æœªçŸ¥é”™è¯¯'
}
```

**é¢„æœŸæ•ˆæœ**:
- âœ… åº”ç”¨å´©æºƒæ—¶ä¸ä¼šç™½å±
- âœ… ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
- âœ… ä¾¿äºé—®é¢˜è¿½è¸ªå’Œä¿®å¤

**å®æ–½ä¼˜å…ˆçº§**: ğŸ”´ é«˜ï¼ˆç«‹å³å®æ–½ï¼‰

---

### 3.3 TypeScript ç±»å‹å®‰å…¨

#### é—®é¢˜è¯Šæ–­
- éƒ¨åˆ†åœ°æ–¹ä½¿ç”¨ any ç±»å‹
- æ¥å£å®šä¹‰ä¸å®Œæ•´
- ç¼ºå°‘ç±»å‹å®ˆå«

#### ä¼˜åŒ–æ–¹æ¡ˆ

**A. å®Œå–„ API å“åº”ç±»å‹**
```typescript
// app/src/types/api.ts
export interface APIResponse<T = any> {
  success: boolean
  data?: T
  message?: string
  error?: string
}

export interface User {
  id: number
  username: string
  email: string
  avatar?: string
  createdAt: string
}

export interface Game {
  id: number
  title: string
  icon: string
  description: string
  difficulty: 'easy' | 'medium' | 'hard'
  category: string
}

// ç±»å‹å®ˆå«
export function isUser(data: any): data is User {
  return (
    typeof data === 'object' &&
    'id' in data &&
    'username' in data &&
    'email' in data
  )
}
```

**B. ä¸¥æ ¼çš„ tsconfig é…ç½®**
```json
// tsconfig.json
{
  "compilerOptions": {
    "strict": true,
    "noImplicitAny": true,
    "strictNullChecks": true,
    "strictFunctionTypes": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noImplicitReturns": true
  }
}
```

**é¢„æœŸæ•ˆæœ**:
- âœ… ç¼–è¯‘æ—¶å‘ç°æ›´å¤šæ½œåœ¨ bug
- âœ… æ›´å¥½çš„ä»£ç æç¤º
- âœ… é™ä½è¿è¡Œæ—¶é”™è¯¯

**å®æ–½ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­ï¼ˆæŒç»­ä¼˜åŒ–ï¼‰

---

## ğŸ”’ å››ã€å®‰å…¨æ€§ä¼˜åŒ–

### 4.1 è¾“å…¥éªŒè¯ä¸æ¸…ç†

```typescript
// app/src/utils/sanitize.ts
export function sanitizeInput(input: string): string {
  return input
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;')
    .replace(/"/g, '&quot;')
    .replace(/'/g, '&#x27;')
    .trim()
}

// åœ¨æ‰€æœ‰ç”¨æˆ·è¾“å…¥å¤„ä½¿ç”¨
const handleSubmit = (e: FormEvent) => {
  const sanitized = sanitizeInput(inputValue)
  // æäº¤å¤„ç†...
}
```

### 4.2 XSS é˜²æŠ¤

```typescript
// ä½¿ç”¨ DOMPurify æ¸…ç† HTML
import DOMPurify from 'dompurify'

export const SafeHTML: React.FC<{ content: string }> = ({ content }) => {
  const clean = DOMPurify.sanitize(content)
  return <div dangerouslySetInnerHTML={{ __html: clean }} />
}
```

### 4.3 CSRF é˜²æŠ¤

```typescript
// ä¸ºæ‰€æœ‰ POST è¯·æ±‚æ·»åŠ  CSRF token
const csrfToken = document.querySelector('meta[name="csrf-token"]')?.content

fetch('/api/endpoint', {
  method: 'POST',
  headers: {
    'X-CSRF-Token': csrfToken || '',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify(data)
})
```

**å®æ–½ä¼˜å…ˆçº§**: ğŸ”´ é«˜ï¼ˆç«‹å³å®æ–½ï¼‰

---

## ğŸ“Š äº”ã€æ€§èƒ½ç›‘æ§ä¸åˆ†æ

### 5.1 é›†æˆæ€§èƒ½ç›‘æ§

```typescript
// app/src/utils/performance.ts
export const performanceMonitor = {
  // è®°å½•é¡µé¢åŠ è½½æ—¶é—´
  measurePageLoad() {
    if (performance.timing) {
      const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart
      console.log(`é¡µé¢åŠ è½½æ—¶é—´: ${loadTime}ms`)
      return loadTime
    }
  },

  // è®°å½• API è¯·æ±‚æ—¶é—´
  async measureAPICall(name: string, apiCall: () => Promise<any>) {
    const start = performance.now()
    const result = await apiCall()
    const duration = performance.now() - start
    console.log(`${name} è€—æ—¶: ${duration.toFixed(2)}ms`)
    return result
  },

  // è®°å½•ç»„ä»¶æ¸²æŸ“æ—¶é—´
  useRenderTime(componentName: string) {
    useEffect(() => {
      const start = performance.now()
      return () => {
        const duration = performance.now() - start
        console.log(`${componentName} æ¸²æŸ“è€—æ—¶: ${duration.toFixed(2)}ms`)
      }
    }, [])
  }
}
```

### 5.2 ç”¨æˆ·è¡Œä¸ºåˆ†æ

```typescript
// app/src/utils/analytics.ts
export const analytics = {
  // é¡µé¢è®¿é—®
  trackPageView(pageName: string) {
    console.log(`é¡µé¢è®¿é—®: ${pageName}`)
    // å¯ä»¥å‘é€åˆ° Google Analytics æˆ–è‡ªå»ºæœåŠ¡
  },

  // äº‹ä»¶è¿½è¸ª
  trackEvent(category: string, action: string, label?: string) {
    console.log(`äº‹ä»¶: ${category} - ${action} - ${label}`)
  },

  // é”™è¯¯è¿½è¸ª
  trackError(error: Error, context?: string) {
    console.error(`é”™è¯¯: ${context}`, error)
  }
}
```

**å®æ–½ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­ï¼ˆ2å‘¨å†…å®Œæˆï¼‰

---

## ğŸ“… å®æ–½è®¡åˆ’

### ç¬¬ä¸€å‘¨ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰
- [ ] è·¯ç”±çº§åˆ«ä»£ç åˆ†å‰²
- [ ] éª¨æ¶å±ç»„ä»¶å®ç°
- [ ] é”™è¯¯è¾¹ç•Œå®ç°
- [ ] å®‰å…¨æ€§åŸºç¡€é˜²æŠ¤

**é¢„æœŸæˆæœ**: é¦–å±åŠ è½½æ—¶é—´å‡å°‘ 40%ï¼Œç”¨æˆ·ä½“éªŒæ˜æ˜¾æå‡

### ç¬¬äºŒå‘¨ï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰
- [ ] å›¾ç‰‡èµ„æºä¼˜åŒ–
- [ ] æ‰“åŒ…ä½“ç§¯ä¼˜åŒ–
- [ ] äº¤äº’åé¦ˆä¼˜åŒ–
- [ ] é€šç”¨ç»„ä»¶åº“åˆ›å»º

**é¢„æœŸæˆæœ**: æ•´ä½“æ€§èƒ½æå‡ 30%ï¼Œä»£ç è´¨é‡æå‡

### ç¬¬ä¸‰å‘¨ï¼ˆæŒç»­ä¼˜åŒ–ï¼‰
- [ ] çŠ¶æ€ç®¡ç†ä¼˜åŒ–
- [ ] TypeScript ç±»å‹å®Œå–„
- [ ] æ€§èƒ½ç›‘æ§é›†æˆ
- [ ] æµ‹è¯•ç”¨ä¾‹ç¼–å†™

**é¢„æœŸæˆæœ**: ç³»ç»Ÿç¨³å®šæ€§æå‡ï¼Œå¯ç»´æŠ¤æ€§å¢å¼º

### ç¬¬å››å‘¨ï¼ˆå®Œå–„ä¸æµ‹è¯•ï¼‰
- [ ] å¯è®¿é—®æ€§ä¼˜åŒ–
- [ ] ç§»åŠ¨ç«¯ä½“éªŒä¼˜åŒ–
- [ ] æ€§èƒ½æµ‹è¯•ä¸è°ƒä¼˜
- [ ] æ–‡æ¡£å®Œå–„

**é¢„æœŸæˆæœ**: å…¨é¢ä¼˜åŒ–å®Œæˆï¼Œè¾¾åˆ°ç”Ÿäº§çº§åˆ«æ ‡å‡†

---

## ğŸ“ˆ é¢„æœŸæ•ˆæœæ€»ç»“

### æ€§èƒ½æŒ‡æ ‡
| æŒ‡æ ‡ | å½“å‰å€¼ | ç›®æ ‡å€¼ | æå‡å¹…åº¦ |
|------|--------|--------|----------|
| é¦–å±åŠ è½½æ—¶é—´ | 3-4ç§’ | <2ç§’ | â†‘40-50% |
| é¡µé¢åˆ‡æ¢æ—¶é—´ | 500ms | <100ms | â†‘80% |
| æ‰“åŒ…ä½“ç§¯ | ~500KB | <350KB | â†“30% |
| API å“åº”é€Ÿåº¦ | 300ms | <200ms | â†‘33% |

### ç”¨æˆ·ä½“éªŒ
- âœ… æ›´æµç•…çš„é¡µé¢è¿‡æ¸¡
- âœ… æ›´å‹å¥½çš„åŠ è½½æç¤º
- âœ… æ›´å¿«çš„å“åº”é€Ÿåº¦
- âœ… æ›´ç¨³å®šçš„ç³»ç»Ÿè¿è¡Œ

### å¼€å‘ä½“éªŒ
- âœ… æ›´å°‘çš„é‡å¤ä»£ç 
- âœ… æ›´å¥½çš„ç±»å‹å®‰å…¨
- âœ… æ›´å®¹æ˜“ç»´æŠ¤
- âœ… æ›´å¿«çš„å¼€å‘æ•ˆç‡

---

## ğŸš€ ç«‹å³å¼€å§‹

**å»ºè®®ä»ä»¥ä¸‹æœ€å…³é”®çš„ä¼˜åŒ–å¼€å§‹ï¼š**

1. **ä»£ç åˆ†å‰²**ï¼ˆæœ€å¤§æ”¶ç›Šï¼‰
   ```bash
   # ç«‹å³å¼€å§‹é‡æ„ App.tsx
   # å°†æ‰€æœ‰é¡µé¢ç»„ä»¶æ”¹ä¸º lazy åŠ è½½
   ```

2. **é”™è¯¯è¾¹ç•Œ**ï¼ˆæå‡ç¨³å®šæ€§ï¼‰
   ```bash
   # åˆ›å»º ErrorBoundary ç»„ä»¶
   # åŒ…è£¹å…³é”®é¡µé¢å’Œç»„ä»¶
   ```

3. **éª¨æ¶å±**ï¼ˆæå‡æ„ŸçŸ¥æ€§èƒ½ï¼‰
   ```bash
   # åˆ›å»º Skeleton ç»„ä»¶
   # åœ¨æ‰€æœ‰åŠ è½½çŠ¶æ€ä½¿ç”¨
   ```

---

**éœ€è¦æˆ‘ç«‹å³å¼€å§‹å®æ–½å“ªä¸€é¡¹ä¼˜åŒ–ï¼Ÿ** ğŸš€
