# è…¾è®¯äº‘å®¹å™¨é•œåƒä»“åº“æ¨é€æŒ‡å—

## ğŸ“‹ å‡†å¤‡å·¥ä½œ

### 1. è·å–è…¾è®¯äº‘ç™»å½•å‡­è¯

è®¿é—®è…¾è®¯äº‘å®¹å™¨é•œåƒæœåŠ¡æ§åˆ¶å°:
```
https://console.cloud.tencent.com/tke2/registry
```

#### æ–¹æ³•A: ç”Ÿæˆä¸´æ—¶ç™»å½•æŒ‡ä»¤(æ¨è)
1. ç‚¹å‡»å·¦ä¾§èœå• "è®¿é—®å‡­è¯"
2. ç‚¹å‡» "ç”Ÿæˆä¸´æ—¶ç™»å½•æŒ‡ä»¤"
3. å¤åˆ¶æ˜¾ç¤ºçš„ç™»å½•å‘½ä»¤

ç™»å½•å‘½ä»¤æ ¼å¼:
```bash
docker login --username=100012345678 ccr.ccs.tencentyun.com
```

#### æ–¹æ³•B: ä½¿ç”¨é•¿æœŸå¯†é’¥
1. ç‚¹å‡» "è®¿é—®å‡­è¯" - "åˆ›å»ºè®¿é—®å‡­è¯"
2. ä¿å­˜ç”¨æˆ·åå’Œå¯†ç 
3. æ‰‹åŠ¨ç™»å½•:
```bash
docker login ccr.ccs.tencentyun.com
# è¾“å…¥ç”¨æˆ·å: ä½ çš„è…¾è®¯äº‘è´¦å·ID
# è¾“å…¥å¯†ç : åˆšæ‰åˆ›å»ºçš„è®¿é—®å‡­è¯å¯†ç 
```

---

## ğŸš€ å¿«é€Ÿæ¨é€(3æ­¥å®Œæˆ)

### æ­¥éª¤1: ç™»å½•è…¾è®¯äº‘é•œåƒä»“åº“

```bash
# ç²˜è´´ä»è…¾è®¯äº‘æ§åˆ¶å°å¤åˆ¶çš„ç™»å½•å‘½ä»¤
docker login --username=ä½ çš„ç”¨æˆ·å ccr.ccs.tencentyun.com
```

### æ­¥éª¤2: è¿è¡Œæ¨é€è„šæœ¬

**Windowsç”¨æˆ·:**
```bash
push-to-tencent.bat
```

**Mac/Linuxç”¨æˆ·:**
```bash
chmod +x push-to-tencent.sh
./push-to-tencent.sh
```

### æ­¥éª¤3: éªŒè¯æ¨é€ç»“æœ

è®¿é—®è…¾è®¯äº‘æ§åˆ¶å°æŸ¥çœ‹:
```
https://console.cloud.tencent.com/tke2/registry/user/space
```

---

## ğŸ“¦ æ‰‹åŠ¨æ¨é€æ­¥éª¤

å¦‚æœè„šæœ¬æ— æ³•è¿è¡Œ,å¯ä»¥æ‰‹åŠ¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤:

### 1. ä¸ºé•œåƒæ‰“æ ‡ç­¾

```bash
# åç«¯é•œåƒ
docker tag qmzg-server:latest ccr.ccs.tencentyun.com/qmzg/qmzg-server:latest

# å‰ç«¯é•œåƒ
docker tag qmzg-app:latest ccr.ccs.tencentyun.com/qmzg/qmzg-app:latest
```

### 2. æ¨é€é•œåƒ

```bash
# æ¨é€åç«¯é•œåƒ
docker push ccr.ccs.tencentyun.com/qmzg/qmzg-server:latest

# æ¨é€å‰ç«¯é•œåƒ
docker push ccr.ccs.tencentyun.com/qmzg/qmzg-app:latest
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: æç¤º"å‘½åç©ºé—´ä¸å­˜åœ¨"

**è§£å†³æ–¹æ¡ˆ:**
1. è®¿é—®è…¾è®¯äº‘æ§åˆ¶å°
2. ç‚¹å‡» "å‘½åç©ºé—´" - "æ–°å»º"
3. åˆ›å»ºå‘½åç©ºé—´: `qmzg`

### Q2: æ¨é€å¤±è´¥,æç¤º"unauthorized"

**è§£å†³æ–¹æ¡ˆ:**
1. é‡æ–°ç™»å½•: `docker login ccr.ccs.tencentyun.com`
2. æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®
3. ç¡®è®¤è®¿é—®å‡­è¯æœªè¿‡æœŸ

### Q3: æ¨é€é€Ÿåº¦å¾ˆæ…¢

**è§£å†³æ–¹æ¡ˆ:**
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. ä½¿ç”¨å›½å†…ç½‘ç»œæ¨é€ä¼šæ›´å¿«
3. å¯ä»¥å°è¯•ä½¿ç”¨è…¾è®¯äº‘è½»é‡åº”ç”¨æœåŠ¡å™¨æ¨é€

### Q4: æç¤º"denied: requested access to the resource is denied"

**è§£å†³æ–¹æ¡ˆ:**
1. ç¡®è®¤å‘½åç©ºé—´ `qmzg` å·²åˆ›å»º
2. æ£€æŸ¥è´¦å·æƒé™
3. ç¡®è®¤ä»“åº“åç§°æ‹¼å†™æ­£ç¡®

---

## ğŸ¯ æ¨é€åçš„é•œåƒåœ°å€

æ¨é€æˆåŠŸå,ä½ çš„é•œåƒåœ°å€ä¸º:

```
åç«¯é•œåƒ:
ccr.ccs.tencentyun.com/qmzg/qmzg-server:latest

å‰ç«¯é•œåƒ:
ccr.ccs.tencentyun.com/qmzg/qmzg-app:latest
```

---

## ğŸ“ åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨é•œåƒ

### 1. æœåŠ¡å™¨ä¸Šç™»å½•

```bash
docker login ccr.ccs.tencentyun.com
```

### 2. æ‹‰å–é•œåƒ

```bash
docker pull ccr.ccs.tencentyun.com/qmzg/qmzg-server:latest
docker pull ccr.ccs.tencentyun.com/qmzg/qmzg-app:latest
```

### 3. è¿è¡Œå®¹å™¨

ä¿®æ”¹ `docker-compose.prod.yml` ä¸­çš„é•œåƒåœ°å€:

```yaml
services:
  server:
    image: ccr.ccs.tencentyun.com/qmzg/qmzg-server:latest
    # ...

  app:
    image: ccr.ccs.tencentyun.com/qmzg/qmzg-app:latest
    # ...
```

ç„¶åå¯åŠ¨:
```bash
docker-compose -f docker-compose.prod.yml up -d
```

---

## ğŸ” å®‰å…¨å»ºè®®

1. **ä¸è¦å°†ç™»å½•å‡­è¯æäº¤åˆ°Git**
2. **å®šæœŸæ›´æ¢è®¿é—®å‡­è¯å¯†ç **
3. **ä½¿ç”¨ä¸´æ—¶ç™»å½•æŒ‡ä»¤(æœ‰æ•ˆæœŸ12å°æ—¶)**
4. **ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ç§æœ‰ä»“åº“**

---

## ğŸ“ éœ€è¦å¸®åŠ©?

- è…¾è®¯äº‘æ–‡æ¡£: https://cloud.tencent.com/document/product/1141
- é¡¹ç›®Issues: https://github.com/wsaxqd/home-work2/issues

---

ç¥æ¨é€é¡ºåˆ©! ğŸ‰
