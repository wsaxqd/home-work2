# 智谱 AI 配置指南

## 📋 简介

智谱 AI（GLM）是国内领先的 AI 服务平台，提供：
- ✅ 免费额度（新用户赠送 tokens）
- ✅ 国内访问速度快
- ✅ 配置简单
- ✅ 支持中文优化

本指南将帮助你快速配置智谱 AI，让启蒙之光应用拥有真正的 AI 智能对话能力。

---

## 🚀 快速开始（5分钟完成）

### 第一步：注册智谱 AI 账号

1. 访问智谱 AI 开放平台：https://open.bigmodel.cn/
2. 点击右上角 "登录/注册" 按钮
3. 可以使用以下方式注册：
   - 手机号注册
   - 微信扫码登录
   - 邮箱注册

### 第二步：实名认证（可选但推荐）

完成实名认证后可获得更多免费额度：
1. 登录后进入 "个人中心"
2. 点击 "实名认证"
3. 按照提示完成认证（需要身份证）

### 第三步：获取 API Key

1. 登录后，点击顶部导航栏的 "API Keys"
2. 点击 "创建新的 API Key" 按钮
3. 填写 API Key 名称（例如：启蒙之光）
4. 点击 "确定" 创建
5. **重要**：复制生成的 API Key（格式类似：`xxxxxxxxxxxxxxxx.xxxxxxxx`）
6. 妥善保存这个密钥，后面配置时需要用到

**注意**：API Key 只会显示一次，请务必保存好！

### 第四步：更新项目配置

1. 打开项目的 `server/.env` 文件
2. 找到 `ZHIPU_API_KEY` 配置项
3. 将 `your-zhipu-api-key-here` 替换为你刚才复制的 API Key

```env
# 智谱 AI 配置
ZHIPU_API_KEY=你的API密钥
ZHIPU_API_URL=https://open.bigmodel.cn/api/paas/v4
ZHIPU_TIMEOUT=30000
```

4. 保存文件

### 第五步：重启服务

配置更新后，需要重启后端服务：

1. 停止当前运行的服务（按 `Ctrl + C`）
2. 重新启动：
   ```bash
   cd server
   npm run dev
   ```

### 第六步：测试 AI 功能

1. 打开浏览器访问：`http://localhost:5174`
2. 进入 "AI情感陪伴" 页面
3. 发送消息测试，例如："你好"
4. 如果配置正确，AI 会用智能回复响应你

---

## ✅ 验证配置是否成功

**成功的标志**：
- ✅ AI 回复内容自然、智能
- ✅ 回复速度较快（1-3秒）
- ✅ 服务器日志没有错误
- ✅ 不再显示 "使用模拟回复功能"

**如果仍然使用模拟回复**：
- 检查 API Key 是否正确复制
- 确认 .env 文件已保存
- 查看服务器日志中的错误信息
- 确认已重启服务

---

## 💰 费用说明

### 免费额度

智谱 AI 为新用户提供免费额度：
- 注册即送：一定数量的免费 tokens
- 实名认证：额外赠送 tokens
- 足够测试和小规模使用

### 计费方式

- 按 tokens 计费（1000 tokens ≈ 750 个汉字）
- GLM-4-Flash 模型：价格实惠，适合对话场景
- 可在控制台查看用量统计

### 充值

如需更多额度，可在控制台充值：
1. 进入 "费用中心"
2. 选择充值金额
3. 支持支付宝、微信支付

---

## 📊 使用的模型

本项目使用 **GLM-4-Flash** 模型：
- ✅ 响应速度快（1-2秒）
- ✅ 价格实惠
- ✅ 中文优化
- ✅ 适合对话场景

如需更强大的模型，可在代码中修改为 `glm-4` 或 `glm-4-plus`。

---

## ❓ 常见问题

### Q1: API Key 在哪里查看？

**A**: 登录智谱 AI 控制台 -> 点击顶部 "API Keys" -> 可以看到已创建的密钥列表

### Q2: 忘记保存 API Key 怎么办？

**A**: 删除旧密钥，重新创建一个新的 API Key

### Q3: 提示 "API Key 无效" 怎么办？

**A**:
- 检查 API Key 是否完整复制（包括所有字符）
- 确认没有多余的空格
- 确认密钥没有被删除或过期

### Q4: 如何查看剩余额度？

**A**: 登录控制台 -> "费用中心" -> 可以看到剩余 tokens 数量

### Q5: 为什么选择智谱 AI？

**A**:
- 国内服务，访问速度快
- 提供免费额度
- 中文优化效果好
- 配置简单，5分钟完成

---

## 🎉 总结

完成以上步骤后，你的启蒙之光应用就拥有了真正的 AI 智能对话能力！

**配置清单**：
- ✅ 注册智谱 AI 账号
- ✅ 获取 API Key
- ✅ 更新 .env 配置文件
- ✅ 重启服务并测试

祝你使用愉快！🎉
